# ============================================
# Project Vulcan - Render.com Environment Variables
# ============================================
# These variables must be set in the Render dashboard
# for each service. DO NOT commit actual values to git.
#
# Render Dashboard: https://dashboard.render.com
# Path: Service â†’ Environment â†’ Add Environment Variable
# ============================================

# ============================================
# VULCAN-WEB (Next.js Frontend)
# ============================================

# Orchestrator API URL (auto-set by Render from service link)
# This will be: https://vulcan-orchestrator.onrender.com
NEXT_PUBLIC_ORCHESTRATOR_URL=https://vulcan-orchestrator.onrender.com

# Database connection (auto-set by Render)
DATABASE_URL=<AUTO_SET_BY_RENDER>

# Optional: For direct desktop CAD access (if needed client-side)
# DESKTOP_SERVER_URL=http://100.x.x.x:8000

# ============================================
# VULCAN-ORCHESTRATOR (FastAPI Backend)
# ============================================

# CRITICAL: Claude API Key (sync: false - set manually)
# Get from: https://console.anthropic.com/settings/keys
ANTHROPIC_API_KEY=sk-ant-api-03-xxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# CRITICAL: Your generic API key for auth (sync: false - set manually)
API_KEY=your-secure-api-key-here

# CRITICAL: Desktop CAD Server URL (sync: false - set manually)
# This should be your desktop's Tailscale IP after setup
# Format: http://100.x.x.x:8000 (replace x.x.x with your Tailscale IP)
DESKTOP_SERVER_URL=http://100.x.x.x:8000

# CRITICAL: Tailscale Auth Key (sync: false - set manually)
# Get from: https://login.tailscale.com/admin/settings/keys
# IMPORTANT: Use a reusable key that doesn't expire
TAILSCALE_AUTHKEY=tskey-auth-xxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# Python version (auto-set)
PYTHON_VERSION=3.11

# Redis connection (auto-set by Render from service link)
REDIS_URL=<AUTO_SET_BY_RENDER>

# ChromaDB host (auto-set by Render from service link)
CHROMA_HOST=<AUTO_SET_BY_RENDER>

# Database connection (auto-set by Render from service link)
DATABASE_URL=<AUTO_SET_BY_RENDER>

# ============================================
# VULCAN-SYSTEM-MANAGER (Background Worker)
# ============================================

# Backup configuration
BACKUP_ENABLED=true

# Health check interval (seconds)
HEALTH_CHECK_INTERVAL=3600

# Redis connection (auto-set by Render from service link)
REDIS_URL=<AUTO_SET_BY_RENDER>

# ============================================
# SETUP INSTRUCTIONS
# ============================================
#
# 1. GO TO RENDER DASHBOARD
#    â†’ https://dashboard.render.com
#    â†’ Select your service (e.g., vulcan-orchestrator)
#    â†’ Click "Environment" tab
#
# 2. ADD EACH VARIABLE
#    â†’ Click "Add Environment Variable"
#    â†’ Copy variable name from above
#    â†’ Paste your actual value
#    â†’ Click "Save Changes"
#
# 3. CRITICAL VARIABLES (MUST BE SET MANUALLY)
#    âœ… ANTHROPIC_API_KEY - Get from Claude dashboard
#    âœ… API_KEY - Create a secure random key
#    âœ… TAILSCALE_AUTHKEY - Get from Tailscale admin
#    âœ… DESKTOP_SERVER_URL - Your desktop's Tailscale IP
#
# 4. AUTO-SET VARIABLES (Render links services automatically)
#    - DATABASE_URL (from vulcan-postgres)
#    - REDIS_URL (from vulcan-redis)
#    - CHROMA_HOST (from vulcan-chroma)
#    - NEXT_PUBLIC_ORCHESTRATOR_URL (from vulcan-orchestrator)
#
# ============================================
# TAILSCALE SETUP
# ============================================
#
# 1. GET TAILSCALE AUTH KEY
#    â†’ Go to https://login.tailscale.com/admin/settings/keys
#    â†’ Click "Generate auth key"
#    â†’ âœ… Check "Reusable"
#    â†’ âœ… Check "Ephemeral" (optional, for testing)
#    â†’ Set expiration to "Never" or long duration
#    â†’ Copy the key (starts with tskey-auth-)
#
# 2. INSTALL TAILSCALE ON DESKTOP
#    â†’ Windows: https://tailscale.com/download/windows
#    â†’ macOS: https://tailscale.com/download/mac
#    â†’ Linux: curl -fsSL https://tailscale.com/install.sh | sh
#
# 3. START TAILSCALE ON DESKTOP
#    â†’ Open Tailscale app
#    â†’ Sign in with your account
#    â†’ Note your Tailscale IP (e.g., 100.101.102.103)
#
# 4. UPDATE DESKTOP_SERVER_URL
#    â†’ In Render dashboard, set:
#      DESKTOP_SERVER_URL=http://100.101.102.103:8000
#    â†’ Replace 100.101.102.103 with your actual Tailscale IP
#
# 5. VERIFY CONNECTION
#    â†’ From Render service: curl http://100.x.x.x:8000/health
#    â†’ Should return desktop server health status
#
# ============================================
# TESTING CHECKLIST
# ============================================
#
# After setting all variables:
#
# âœ… Web frontend loads: https://vulcan-web.onrender.com
# âœ… Orchestrator health: https://vulcan-orchestrator.onrender.com/health
# âœ… API docs accessible: https://vulcan-orchestrator.onrender.com/docs
# âœ… Desktop connection: health check shows "desktop_server": "connected"
# âœ… Database queries work
# âœ… Redis caching functional
# âœ… ChromaDB memory accessible
#
# ============================================
# TROUBLESHOOTING
# ============================================
#
# If web frontend shows 404:
#   â†’ Check build logs in Render dashboard
#   â†’ Verify rootDir: apps/web is set correctly
#   â†’ Check if npm run build succeeded
#   â†’ Trigger manual deploy
#
# If desktop shows unreachable:
#   â†’ Verify Tailscale is running on desktop
#   â†’ Check desktop server is running on port 8000
#   â†’ Confirm DESKTOP_SERVER_URL uses Tailscale IP
#   â†’ Test: curl http://100.x.x.x:8000/health
#
# If orchestrator crashes:
#   â†’ Check ANTHROPIC_API_KEY is valid
#   â†’ Verify all required env vars are set
#   â†’ Check logs for missing dependencies
#   â†’ Ensure Docker build succeeded
#
# ============================================
# SECURITY NOTES
# ============================================
#
# ðŸ”’ NEVER commit these files with real values:
#    - .env
#    - .env.local
#    - .env.production
#
# âœ… ALWAYS use Render's "sync: false" for secrets
# âœ… USE strong, random API keys
# âœ… ROTATE Tailscale keys periodically
# âœ… ENABLE Render's secret encryption
#
# ============================================
