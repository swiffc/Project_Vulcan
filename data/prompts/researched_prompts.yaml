version: "1.0"
created: "2025-12-26"
description: "Researched prompts for CAD validation, design recommendations, standards compliance, and engineering workflows"
source: "Research from prompt engineering best practices, engineering standards, and CAD automation patterns"

prompts:
  # ========================================================================
  # STANDARDS COMPLIANCE PROMPTS
  # ========================================================================
  
  - id: "standards.ache_validation_expert"
    name: "ACHE Standards Validation Expert"
    description: "Expert validation against API 661 and ACHE-specific standards"
    type: "chain_of_thought"
    category: "validation"
    content: |
      Validate this ACHE (Air-Cooled Heat Exchanger) design against API 661 and HPC standards.
      
      **Design Data:**
      ${design_data}
      
      **Validation Process - Step by Step:**
      
      **1. Design Basis Verification**
      - Operating pressure: ${operating_pressure} PSI (verify ≤ design pressure)
      - Design temperature: ${design_temp}°F (check material limits)
      - Tube count: ${tube_count} (verify even distribution)
      - Tube length: ${tube_length}ft (check support spacing ≤ 5.75ft)
      - Fan configuration: ${fan_config} (forced/induced draft)
      
      **2. Mechanical Design Checks**
      - Header design: Verify nameplate thickness ≥ 0.105" (HPC standard)
      - Lifting lugs: Quantity ≥ 4 for 50/60 long tubes, spacing ≤ 23ft centerline
      - Lifting lug part: Verify W708/W709/W710/W711/W712 selection based on load
      - Machinery mount: Verify length formula and diagonal brace spacing (1" to 6-1/4" in 1/4" increments)
      - Vibration switch: 1' from fan centerline, 6" from top
      - Walkway ladder rungs: #6 rebar standard
      - Toe-plate: PRL 4-1/2" x 2" x 1/4" welded component
      
      **3. Standards Compliance**
      - API 661: Air-cooled heat exchanger requirements
      - HPC Standards: Book I-IV compliance
      - ASME Y14.5: Drawing standards
      - AWS D1.1: Welding requirements
      - OSHA 1910: Safety requirements
      
      **4. Material Verification**
      - Header material: ${header_material} (verify against pressure/temperature)
      - Tube material: ${tube_material} (check corrosion resistance)
      - Frame material: ${frame_material} (structural adequacy)
      
      **5. Output Format**
      Return JSON:
      {
        "validation_status": "pass|fail|warning",
        "critical_issues": [
          {
            "check": "string",
            "standard": "API 661|HPC|ASME",
            "requirement": "string",
            "actual": "string",
            "recommendation": "string"
          }
        ],
        "warnings": [...],
        "approval_required": true|false
      }
    variables:
      - design_data
      - operating_pressure
      - design_temp
      - tube_count
      - tube_length
      - fan_config
      - header_material
      - tube_material
      - frame_material
    tags:
      - ache
      - api661
      - hpc
      - validation
      - standards
    model_hint: "claude-sonnet-4"
    temperature: 0.2
    max_tokens: 3000

  - id: "standards.hpc_lifting_lug_selector"
    name: "HPC Lifting Lug Part Selector"
    description: "Select appropriate HPC lifting lug part number based on load and dimensions"
    type: "task"
    category: "engineering"
    content: |
      Select the appropriate HPC lifting lug part number for this application:
      
      **Application Requirements:**
      - Unit weight: ${unit_weight} lbs
      - Number of lugs: ${lug_count}
      - Tube length: ${tube_length}ft
      - Centerline spacing: ${spacing}ft
      
      **HPC Standard Parts Available:**
      | Part | Thickness | Width | Block-Out A | Block-Out B | Block-Out C |
      |------|-----------|-------|-------------|-------------|-------------|
      | W708 | 0.75" | 5.5" | 2.875" | 2.875" | 1.0" |
      | W709 | 0.75" | 7.0" | 3.625" | 2.875" | 1.0" |
      | W710 | 0.75" | 8.0" | 4.125" | 2.875" | 1.0" |
      | W711 | 1.0" | 7.0" | 3.625" | 2.875" | 1.25" |
      | W712 | 1.0" | 8.0" | 4.125" | 2.875" | 1.25" |
      
      **Selection Criteria:**
      1. Load per lug: ${unit_weight} / ${lug_count} = ${load_per_lug} lbs
      2. Verify 4:1 safety factor (ASME BTH-1)
      3. Check spacing: Must be ≤ 23ft centerline (HPC standard)
      4. Default: W708 for standard applications
      5. Use W709/W710 for wider applications
      6. Use W711/W712 for heavier loads (1" thickness)
      
      **Rules:**
      - 4 lifting lugs required for units with 50 or 60 long tubes or greater
      - Maximum centerline spacing: 23.0ft
      - Default part: W708
      
      **Output:**
      {
        "selected_part": "W708|W709|W710|W711|W712",
        "rationale": "string",
        "load_per_lug_lbs": number,
        "safety_factor": number,
        "spacing_compliant": true|false,
        "alternative_parts": ["part1", "part2"]
      }
    variables:
      - unit_weight
      - lug_count
      - tube_length
      - spacing
    tags:
      - hpc
      - lifting-lug
      - part-selection
      - standards
    model_hint: "claude-sonnet-4"
    temperature: 0.1
    max_tokens: 1500

  - id: "standards.asme_b16_5_flange_validator"
    name: "ASME B16.5 Flange Validator"
    description: "Validate flange design against ASME B16.5 standard"
    type: "chain_of_thought"
    category: "validation"
    content: |
      Validate this flange design against ASME B16.5:
      
      **Flange Data:**
      ${flange_data}
      
      **Step-by-Step Validation:**
      
      **1. Size & Rating Verification**
      - Nominal size: ${nominal_size}" (verify standard: 1/2" to 24")
      - Pressure rating: ${rating} (150#, 300#, 600#, 900#, 1500#, 2500#)
      - Flange type: ${flange_type} (Weld Neck, Slip-On, Socket Weld, Lap Joint, Threaded, Blind)
      - Face type: ${face_type} (Raised Face, Flat Face, Ring Joint)
      
      **2. Dimensional Checks**
      - Outside diameter (OD): ${od}" (verify against B16.5 Table 1)
      - Bolt circle diameter (BCD): ${bcd}" (verify against B16.5 Table 1)
      - Number of bolts: ${bolt_count} (verify against B16.5 Table 1)
      - Bolt size: ${bolt_size}" (verify against B16.5 Table 1)
      - Hub diameter: ${hub_dia}" (for Weld Neck only)
      - Hub length: ${hub_length}" (for Weld Neck only)
      
      **3. Material Verification**
      - Flange material: ${material} (verify Group 1, 2, or 3 per B16.5)
      - Temperature rating: ${temp}°F (check material limits)
      - Pressure rating at temperature: ${pressure_at_temp} PSI (verify ≤ design pressure)
      
      **4. Surface Finish**
      - Raised face finish: 125-250 microinches Ra (ASME B16.5 requirement)
      - Flat face finish: 125-500 microinches Ra
      - Ring joint groove: Per ASME B16.20
      
      **5. Bolt & Gasket**
      - Bolt material: ${bolt_material} (verify grade matches flange rating)
      - Gasket type: ${gasket_type} (verify compatibility)
      - Gasket dimensions: ${gasket_od}" x ${gasket_id}" (verify per B16.20)
      
      **Output:**
      {
        "validation_status": "pass|fail|warning",
        "dimensional_compliance": true|false,
        "material_compliance": true|false,
        "issues": [
          {
            "check": "string",
            "standard_value": "string",
            "actual_value": "string",
            "status": "pass|fail",
            "recommendation": "string"
          }
        ],
        "b16_5_table_reference": "Table 1|Table 2|Table 3"
      }
    variables:
      - flange_data
      - nominal_size
      - rating
      - flange_type
      - face_type
      - od
      - bcd
      - bolt_count
      - bolt_size
      - hub_dia
      - hub_length
      - material
      - temp
      - pressure_at_temp
      - bolt_material
      - gasket_type
      - gasket_od
      - gasket_id
    tags:
      - asme
      - b16.5
      - flange
      - validation
      - standards
    model_hint: "claude-sonnet-4"
    temperature: 0.2
    max_tokens: 2500

  # ========================================================================
  # DESIGN RECOMMENDATION PROMPTS
  # ========================================================================
  
  - id: "design.material_selector"
    name: "Material Selection Expert"
    description: "Recommend materials based on application requirements"
    type: "chain_of_thought"
    category: "engineering"
    content: |
      Recommend the best material for this application:
      
      **Application Requirements:**
      - Operating temperature: ${temp}°F
      - Operating pressure: ${pressure} PSI
      - Environment: ${environment} (atmospheric, corrosive, high-temperature, cryogenic)
      - Load type: ${load_type} (static, dynamic, cyclic)
      - Required strength: ${yield_strength} ksi minimum
      - Corrosion resistance: ${corrosion_requirement}
      - Cost constraint: ${cost_range}
      - Manufacturing method: ${manufacturing} (machining, casting, welding, forging)
      
      **Material Selection Process:**
      
      **Step 1: Temperature Range**
      - Check material operating temperature limits
      - Verify strength retention at operating temp
      - Consider thermal expansion coefficient
      
      **Step 2: Pressure/Strength Requirements**
      - Calculate required wall thickness
      - Verify yield strength ≥ ${yield_strength} ksi
      - Check ASME code allowable stress
      
      **Step 3: Corrosion Resistance**
      - Match material to environment
      - Consider coating/plating if needed
      - Check pitting/cracking resistance
      
      **Step 4: Manufacturing Compatibility**
      - Verify material is suitable for ${manufacturing}
      - Check weldability (if welding required)
      - Consider machinability rating
      
      **Step 5: Cost Optimization**
      - Compare material costs
      - Consider total cost (material + fabrication)
      - Evaluate alternatives
      
      **Common Material Recommendations:**
      
      **Carbon Steel:**
      - ASTM A36: General structural (Fy=36ksi, temp ≤ 650°F)
      - ASTM A516 Gr70: Pressure vessels (Fy=38ksi, temp ≤ 800°F)
      - SA-105: Forged flanges/fittings (temp ≤ 1000°F)
      
      **Stainless Steel:**
      - 304SS: General corrosion resistance (temp ≤ 1650°F)
      - 316SS: Enhanced corrosion (temp ≤ 1650°F)
      - 321SS: High temperature (temp ≤ 1500°F)
      
      **Alloy Steel:**
      - A387 Gr11: High temperature (temp ≤ 1100°F)
      - A335 P11: Piping (temp ≤ 1100°F)
      
      **Output:**
      {
        "recommended_material": "string",
        "grade": "string",
        "rationale": "string",
        "properties": {
          "yield_strength_ksi": number,
          "tensile_strength_ksi": number,
          "max_temp_f": number,
          "corrosion_resistance": "excellent|good|fair|poor"
        },
        "alternatives": [
          {
            "material": "string",
            "pros": ["string"],
            "cons": ["string"]
          }
        ],
        "cost_estimate": "low|medium|high",
        "standards_reference": "ASTM|ASME|AISI"
      }
    variables:
      - temp
      - pressure
      - environment
      - load_type
      - yield_strength
      - corrosion_requirement
      - cost_range
      - manufacturing
    tags:
      - material-selection
      - design
      - engineering
      - recommendations
    model_hint: "claude-sonnet-4"
    temperature: 0.4
    max_tokens: 2500

  - id: "design.cost_estimator"
    name: "CAD Part Cost Estimator"
    description: "Estimate manufacturing cost for CAD parts"
    type: "structured"
    category: "engineering"
    content: |
      Estimate the manufacturing cost for this part:
      
      **Part Information:**
      ${part_data}
      
      **Cost Estimation Breakdown:**
      
      **1. Material Cost**
      - Material: ${material}
      - Weight: ${weight} kg
      - Material cost per kg: $${material_cost_per_kg}
      - Material cost: ${weight} × $${material_cost_per_kg} = $${material_cost}
      
      **2. Manufacturing Cost**
      - Manufacturing method: ${manufacturing_method}
      - Setup time: ${setup_hours} hours @ $${setup_rate}/hr = $${setup_cost}
      - Run time: ${run_hours} hours @ $${run_rate}/hr = $${run_cost}
      - Tooling cost: $${tooling_cost} (amortized)
      
      **3. Finishing Cost**
      - Surface finish: ${surface_finish}
      - Coating: ${coating}
      - Finishing cost: $${finishing_cost}
      
      **4. Assembly Cost** (if applicable)
      - Assembly time: ${assembly_hours} hours @ $${assembly_rate}/hr
      - Fasteners: $${fastener_cost}
      
      **5. Overhead & Margin**
      - Overhead: ${overhead_percent}% of direct cost
      - Profit margin: ${profit_percent}%
      
      **Output JSON:**
      {
        "part_number": "string",
        "cost_breakdown": {
          "material": {
            "cost": number,
            "weight_kg": number,
            "cost_per_kg": number
          },
          "manufacturing": {
            "setup_cost": number,
            "run_cost": number,
            "tooling_cost": number,
            "total": number
          },
          "finishing": {
            "cost": number,
            "description": "string"
          },
          "assembly": {
            "cost": number,
            "hours": number
          },
          "overhead": {
            "percent": number,
            "amount": number
          },
          "profit_margin": {
            "percent": number,
            "amount": number
          }
        },
        "total_cost": number,
        "unit_cost": number,
        "cost_per_kg": number,
        "cost_drivers": ["string"],
        "cost_reduction_suggestions": ["string"]
      }
    variables:
      - part_data
      - material
      - weight
      - material_cost_per_kg
      - material_cost
      - manufacturing_method
      - setup_hours
      - setup_rate
      - setup_cost
      - run_hours
      - run_rate
      - run_cost
      - tooling_cost
      - surface_finish
      - coating
      - finishing_cost
      - assembly_hours
      - assembly_rate
      - fastener_cost
      - overhead_percent
      - profit_percent
    tags:
      - cost-estimation
      - manufacturing
      - pricing
      - design
    model_hint: "claude-sonnet-4"
    temperature: 0.2
    max_tokens: 2000

  - id: "design.dfm_analyzer"
    name: "Design for Manufacturing Analyzer"
    description: "Analyze CAD design for manufacturability issues"
    type: "chain_of_thought"
    category: "engineering"
    content: |
      Analyze this design for manufacturability:
      
      **Design Data:**
      ${design_data}
      
      **DFM Analysis - Step by Step:**
      
      **1. Material Selection**
      - Is material readily available?
      - Can material be machined/cast/welded easily?
      - Are there cheaper alternatives?
      
      **2. Feature Complexity**
      - Are there sharp internal corners? (Add radii)
      - Minimum wall thickness: ${min_wall}mm (verify ≥ 1mm for machining, ≥ 3mm for casting)
      - Undercuts present? (May require special tooling)
      - Deep holes? (Length:diameter ratio ≤ 10:1 preferred)
      
      **3. Tolerance Analysis**
      - Are tolerances achievable with standard processes?
      - Tight tolerances (≤ 0.01mm) require grinding - expensive
      - Standard tolerances (±0.1mm) achievable with CNC
      - Loose tolerances (±0.5mm) for rough casting/forging
      
      **4. Surface Finish**
      - Required finish: ${surface_finish} Ra
      - Standard machining: 1.6-3.2 Ra
      - Fine machining: 0.4-0.8 Ra
      - Grinding: 0.1-0.4 Ra
      - Polishing: < 0.1 Ra (expensive)
      
      **5. Manufacturing Method**
      - ${manufacturing_method} suitability:
        - **Machining**: Complex shapes, tight tolerances, small batches
        - **Casting**: Complex internal features, large batches, lower cost
        - **Welding**: Large assemblies, custom sizes, field fabrication
        - **Forging**: High strength, simple shapes, large batches
        - **Sheet Metal**: Thin parts, bends, enclosures
      
      **6. Assembly Considerations**
      - Can parts be assembled easily?
      - Clearance for tools/access?
      - Self-locating features?
      - Standard fasteners used?
      
      **7. Cost Optimization**
      - Can features be simplified?
      - Can tolerances be relaxed?
      - Can material be changed?
      - Can manufacturing method be optimized?
      
      **Output:**
      {
        "manufacturability_score": 0-100,
        "manufacturing_method": "machining|casting|welding|forging|sheet_metal",
        "issues": [
          {
            "severity": "critical|warning|info",
            "feature": "string",
            "issue": "string",
            "recommendation": "string",
            "cost_impact": "high|medium|low"
          }
        ],
        "recommendations": [
          {
            "change": "string",
            "benefit": "string",
            "cost_savings_estimate": "string"
          }
        ],
        "estimated_manufacturing_cost": number,
        "complexity_rating": "simple|moderate|complex|very_complex"
      }
    variables:
      - design_data
      - min_wall
      - surface_finish
      - manufacturing_method
    tags:
      - dfm
      - manufacturability
      - design
      - optimization
    model_hint: "claude-sonnet-4"
    temperature: 0.3
    max_tokens: 3000

  # ========================================================================
  # DRAWING ANALYSIS PROMPTS
  # ========================================================================
  
  - id: "drawing.gdt_analyzer"
    name: "GD&T Symbol Analyzer"
    description: "Analyze and explain GD&T symbols per ASME Y14.5"
    type: "few_shot"
    category: "engineering"
    content: |
      Analyze this GD&T symbol from the drawing:
      
      **GD&T Symbol:**
      ${gdt_symbol}
      
      **Example 1: Position Tolerance**
      Input: [⏊|0.010|A|B|C]
      Output:
      - Feature: Position (true position)
      - Tolerance: 0.010" diameter
      - Datums: A (primary), B (secondary), C (tertiary)
      - Meaning: Hole center must be within 0.010" diameter cylinder relative to datums A, B, C
      - Inspection: Use CMM or coordinate measuring machine
      
      **Example 2: Flatness**
      Input: [⏥|0.005]
      Output:
      - Feature: Flatness
      - Tolerance: 0.005"
      - Meaning: Surface must be flat within 0.005" across entire surface
      - Inspection: Use surface plate and indicator
      
      **Example 3: Perpendicularity**
      Input: [⊥|0.008|A]
      Output:
      - Feature: Perpendicularity
      - Tolerance: 0.008"
      - Datum: A
      - Meaning: Feature must be perpendicular to datum A within 0.008"
      - Inspection: Use square and indicator
      
      **Now analyze:**
      ${gdt_symbol}
      
      **Provide:**
      1. **Symbol Type**: [Form|Orientation|Location|Runout|Profile]
      2. **Tolerance Value**: [number with units]
      3. **Datum References**: [if applicable]
      4. **Meaning**: [Plain English explanation]
      5. **Inspection Method**: [How to verify]
      6. **Common Mistakes**: [What to watch for]
      7. **Manufacturing Impact**: [How this affects manufacturing]
    variables:
      - gdt_symbol
    tags:
      - gdt
      - asme-y14.5
      - drawing
      - analysis
      - few-shot
    model_hint: "claude-sonnet-4"
    temperature: 0.3
    max_tokens: 2000

  - id: "drawing.hole_pattern_validator"
    name: "Hole Pattern Validator"
    description: "Validate hole patterns for bolt circles, pitch circles, and alignment"
    type: "structured"
    category: "validation"
    content: |
      Validate this hole pattern:
      
      **Hole Pattern Data:**
      ${hole_pattern_data}
      
      **Validation Checks:**
      
      **1. Pattern Type Identification**
      - Bolt circle (circular pattern)
      - Rectangular pattern
      - Linear pattern
      - Custom pattern
      
      **2. Dimensional Verification**
      - Bolt circle diameter: ${bcd}" (verify against standard)
      - Number of holes: ${hole_count} (verify even distribution)
      - Hole diameter: ${hole_dia}" (verify clearance for bolt size)
      - Pitch: ${pitch}" (verify spacing)
      
      **3. Alignment Checks**
      - Center-to-center spacing: Verify within tolerance (±1/16" typical)
      - Angular spacing: ${angular_spacing}° (verify 360° / ${hole_count} = ${expected_angle}°)
      - Concentricity: Verify holes are on true circle
      
      **4. Edge Distance**
      - Minimum edge distance: 1.5 × bolt diameter (AISC J3.4)
      - Actual edge distance: ${edge_distance}" (verify ≥ ${min_edge_distance}")
      
      **5. Standards Compliance**
      - ASME B16.5: Flange bolt patterns
      - AISC: Structural bolt patterns
      - Custom: Verify against drawing requirements
      
      **Output JSON:**
      {
        "pattern_type": "bolt_circle|rectangular|linear|custom",
        "validation_status": "pass|fail|warning",
        "dimensional_checks": {
          "bcd_compliant": true|false,
          "hole_count_correct": true|false,
          "hole_dia_adequate": true|false,
          "pitch_correct": true|false
        },
        "alignment_checks": {
          "spacing_within_tolerance": true|false,
          "angular_spacing_correct": true|false,
          "concentricity_ok": true|false
        },
        "edge_distance_checks": {
          "min_edge_distance": number,
          "actual_edge_distance": number,
          "compliant": true|false
        },
        "issues": [
          {
            "check": "string",
            "status": "pass|fail|warning",
            "requirement": "string",
            "actual": "string",
            "recommendation": "string"
          }
        ],
        "standards_reference": "ASME B16.5|AISC|Custom"
      }
    variables:
      - hole_pattern_data
      - bcd
      - hole_count
      - hole_dia
      - pitch
      - angular_spacing
      - expected_angle
      - edge_distance
      - min_edge_distance
    tags:
      - hole-pattern
      - validation
      - drawing
      - bolt-circle
    model_hint: "claude-sonnet-4"
    temperature: 0.2
    max_tokens: 2000

  # ========================================================================
  # WELDING & FABRICATION PROMPTS
  # ========================================================================
  
  - id: "welding.weld_size_calculator"
    name: "Weld Size Calculator"
    description: "Calculate required weld sizes per AWS D1.1"
    type: "task"
    category: "engineering"
    content: |
      Calculate the required weld size for this joint:
      
      **Joint Information:**
      - Joint type: ${joint_type} (butt, fillet, plug, slot)
      - Material thickness: ${thickness}" (thinner member for fillet welds)
      - Load: ${load} lbs
      - Load type: ${load_type} (tension, compression, shear, bending)
      - Safety factor: ${safety_factor} (typically 2.0-4.0)
      - Material: ${material} (yield strength: ${yield_strength} ksi)
      
      **Calculation Method (AWS D1.1):**
      
      **For Fillet Welds:**
      - Minimum leg size: 0.25 × thickness (but not less than 1/8")
      - Maximum leg size: 0.7 × thickness (for single pass)
      - Throat size: leg × 0.707 (for equal leg fillet)
      - Allowable stress: 0.3 × electrode tensile strength
      - Required throat: Load / (Allowable stress × Weld length)
      - Required leg: Required throat / 0.707
      
      **For Butt Welds:**
      - Full penetration: Thickness = material thickness
      - Partial penetration: Per AWS D1.1 Table 3.2
      - Groove angle: 60° (single V), 45° (double V)
      - Root face: 1/8" to 1/4"
      
      **Output:**
      {
        "weld_type": "fillet|butt|plug|slot",
        "minimum_size": {
          "leg_inches": number,
          "throat_inches": number,
          "rationale": "string"
        },
        "calculated_size": {
          "leg_inches": number,
          "throat_inches": number,
          "based_on": "load|thickness|standard"
        },
        "recommended_size": {
          "leg_inches": number,
          "throat_inches": number,
          "rationale": "string"
        },
        "aws_d1_1_reference": "Section X.X",
        "notes": ["string"]
      }
    variables:
      - joint_type
      - thickness
      - load
      - load_type
      - safety_factor
      - material
      - yield_strength
    tags:
      - welding
      - aws-d1.1
      - calculation
      - design
    model_hint: "claude-sonnet-4"
    temperature: 0.2
    max_tokens: 2000

  # ========================================================================
  # BOM & ASSEMBLY PROMPTS
  # ========================================================================
  
  - id: "bom.completeness_checker"
    name: "BOM Completeness Checker"
    description: "Verify BOM has all required information"
    type: "structured"
    category: "validation"
    content: |
      Check this Bill of Materials for completeness:
      
      **BOM Data:**
      ${bom_data}
      
      **Required Fields Checklist:**
      - [ ] Part number (unique identifier)
      - [ ] Description (clear, unambiguous)
      - [ ] Quantity (correct count)
      - [ ] Material (specification and grade)
      - [ ] Finish/Coating (if applicable)
      - [ ] Dimensions (for raw materials)
      - [ ] Standard (ASTM, ASME, etc.)
      - [ ] Vendor/Supplier (if standard part)
      - [ ] Unit cost (for costing)
      - [ ] Total cost (quantity × unit cost)
      
      **Common Issues to Check:**
      1. **Missing Information**
         - Part numbers missing or duplicated
         - Descriptions too vague
         - Materials not specified
         
      2. **Inconsistencies**
         - Quantity mismatches between BOM and drawing
         - Material conflicts (different materials for same part)
         - Unit mismatches (imperial vs metric)
         
      3. **Standards Compliance**
         - Fasteners missing grade/specification
         - Materials not following company standards
         - Missing certifications (e.g., material certs)
         
      4. **Costing Issues**
         - Missing unit costs
         - Incorrect quantity calculations
         - Missing freight/shipping costs
      
      **Output JSON:**
      {
        "completeness_score": 0-100,
        "missing_fields": [
          {
            "part": "string",
            "missing_field": "string",
            "severity": "critical|warning|info"
          }
        ],
        "inconsistencies": [
          {
            "issue": "string",
            "parts_affected": ["string"],
            "recommendation": "string"
          }
        ],
        "standards_issues": [
          {
            "part": "string",
            "issue": "string",
            "standard_required": "string"
          }
        ],
        "approval_status": "complete|needs_revision|incomplete"
      }
    variables:
      - bom_data
    tags:
      - bom
      - validation
      - completeness
      - assembly
    model_hint: "claude-sonnet-4"
    temperature: 0.2
    max_tokens: 2000

  # ========================================================================
  # STRATEGY & AUTOMATION PROMPTS
  # ========================================================================
  
  - id: "strategy.cad_automation_planner"
    name: "CAD Automation Strategy Planner"
    description: "Plan automation strategy for CAD operations"
    type: "react"
    category: "code_generation"
    content: |
      Plan an automation strategy for this CAD task:
      
      **Task Description:**
      ${task_description}
      
      **CAD Software:** ${cad_software} (SolidWorks|Inventor)
      
      **Planning Process (ReAct Pattern):**
      
      **Step 1: Understand Requirements**
      ```json
      {
        "thought": "I need to understand what the user wants to automate",
        "action": {
          "command": "analyze_requirements",
          "questions": [
            "What operations need to be automated?",
            "How many parts/assemblies?",
            "Are there variations/configurations?",
            "What's the input data format?",
            "What's the expected output?"
          ]
        }
      }
      ```
      
      **Step 2: Identify Operations**
      ```json
      {
        "observation": "User wants to create 50 flange parts with varying sizes",
        "thought": "This requires batch processing with parameter variations",
        "action": {
          "command": "identify_operations",
          "operations": [
            "Create new part",
            "Create sketch (circle for OD, ID)",
            "Extrude to thickness",
            "Add bolt circle pattern",
            "Add chamfers",
            "Set material",
            "Save with naming convention"
          ]
        }
      }
      ```
      
      **Step 3: Design Automation Flow**
      ```json
      {
        "thought": "Need to create a loop that processes each flange size",
        "action": {
          "command": "design_flow",
          "flow": [
            "1. Read input data (CSV/Excel with sizes)",
            "2. For each row:",
            "   a. Extract parameters (OD, ID, thickness, bolt_count)",
            "   b. Create part with parameters",
            "   c. Apply features",
            "   d. Save part",
            "3. Generate summary report"
          ]
        }
      }
      ```
      
      **Step 4: Generate Code Structure**
      ```json
      {
        "thought": "Now I'll generate the actual API code",
        "action": {
          "command": "generate_code",
          "code_structure": {
            "imports": ["win32com.client", "csv", "os"],
            "functions": [
              "create_flange(od, id, thickness, bolt_count)",
              "add_bolt_circle(bcd, hole_count, hole_dia)",
              "batch_process(input_file)"
            ],
            "main_loop": "for each row in CSV: create_flange(...)"
          }
        }
      }
      ```
      
      **Output:**
      {
        "automation_strategy": {
          "approach": "batch_processing|parameter_driven|template_based",
          "operations": ["string"],
          "flow_diagram": "string",
          "estimated_time": "string"
        },
        "code_structure": {
          "functions": ["string"],
          "data_flow": "string",
          "error_handling": "string"
        },
        "recommendations": [
          "string"
        ]
      }
    variables:
      - task_description
      - cad_software
    tags:
      - automation
      - strategy
      - cad
      - react
      - planning
    model_hint: "claude-sonnet-4"
    temperature: 0.4
    max_tokens: 3000

  # ========================================================================
  # AISC STRUCTURAL PROMPTS
  # ========================================================================
  
  - id: "structural.aisc_beam_designer"
    name: "AISC Beam Design Expert"
    description: "Design and validate steel beams per AISC 360-16"
    type: "chain_of_thought"
    category: "engineering"
    content: |
      Design and validate a steel beam per AISC 360-16:
      
      **Beam Requirements:**
      ${beam_data}
      
      **Design Process - Step by Step:**
      
      **1. Load Analysis**
      - Dead load: ${dead_load} kips
      - Live load: ${live_load} kips
      - Factored load: 1.2D + 1.6L = ${factored_load} kips
      - Maximum moment: ${moment} kip-ft
      - Maximum shear: ${shear} kips
      
      **2. Section Selection**
      - Try shape: ${shape} (e.g., W16X77)
      - Material: ${material} (A992, A36, A572-50)
      - Yield strength: Fy = ${fy} ksi
      - Check AISC Manual Table 3-2 for available shapes
      
      **3. Flexural Capacity (AISC F2)**
      - Check compact section (AISC B4.1):
        - Flange: bf/2tf ≤ 0.38√(E/Fy)
        - Web: h/tw ≤ 3.76√(E/Fy)
      - If compact: Mn = Mp = Fy × Zx
      - If non-compact: Check inelastic buckling
      - If slender: Check elastic buckling
      - Lateral-torsional buckling check (AISC F2.2):
        - Lb ≤ Lp: Mn = Mp
        - Lp < Lb ≤ Lr: Inelastic LTB
        - Lb > Lr: Elastic LTB
      
      **4. Shear Capacity (AISC G2)**
      - For rolled I-shapes: Vn = 0.6Fy × Aw × Cv
      - Aw = d × tw (web area)
      - Cv = 1.0 if h/tw ≤ 2.24√(E/Fy)
      
      **5. Deflection Check**
      - Maximum deflection: Δ = 5wL⁴/(384EI)
      - Limit: L/360 for live load (floors), L/240 for total load
      - Check IBC Table 1604.3
      
      **6. Serviceability**
      - Check vibration (if applicable)
      - Check camber requirements
      
      **Output JSON:**
      {
        "design_status": "pass|fail|warning",
        "selected_shape": "string",
        "material": "string",
        "flexural_check": {
          "required_moment_kip_ft": number,
          "available_moment_kip_ft": number,
          "dcr": number,
          "status": "pass|fail",
          "governing_limit": "yielding|ltb|local_buckling"
        },
        "shear_check": {
          "required_shear_kips": number,
          "available_shear_kips": number,
          "dcr": number,
          "status": "pass|fail"
        },
        "deflection_check": {
          "actual_deflection_in": number,
          "limit_deflection_in": number,
          "status": "pass|fail"
        },
        "aisc_references": ["F2", "G2", "B4.1"],
        "recommendations": ["string"]
      }
    variables:
      - beam_data
      - dead_load
      - live_load
      - factored_load
      - moment
      - shear
      - shape
      - material
      - fy
    tags:
      - aisc
      - structural
      - beam
      - design
      - validation
    model_hint: "claude-sonnet-4"
    temperature: 0.2
    max_tokens: 3000

  - id: "structural.aisc_column_designer"
    name: "AISC Column Design Expert"
    description: "Design and validate steel columns per AISC 360-16"
    type: "chain_of_thought"
    category: "engineering"
    content: |
      Design and validate a steel column per AISC 360-16:
      
      **Column Requirements:**
      ${column_data}
      
      **Design Process:**
      
      **1. Load Analysis**
      - Axial load: ${axial_load} kips
      - Moment X: ${moment_x} kip-ft
      - Moment Y: ${moment_y} kip-ft
      - K-factor: ${k_factor} (effective length factor)
      - Unbraced length: ${length} ft
      - Effective length: KL = ${k_factor} × ${length} = ${effective_length} ft
      
      **2. Section Selection**
      - Try shape: ${shape} (e.g., W14X68)
      - Material: ${material}
      - Check AISC Manual Table 4-1 for available shapes
      
      **3. Slenderness Check (AISC E3)**
      - KL/r ≤ 200 (AISC E2 requirement)
      - rx = ${rx} in, ry = ${ry} in
      - (KL/r)x = ${klr_x}
      - (KL/r)y = ${klr_y}
      - Use maximum: (KL/r)max = ${klr_max}
      
      **4. Compression Capacity (AISC E3)**
      - If (KL/r) ≤ 4.71√(E/Fy): Fcr = [0.658^(Fy/Fe)] × Fy
      - If (KL/r) > 4.71√(E/Fy): Fcr = 0.877 × Fe
      - Fe = π²E/(KL/r)² (Euler buckling stress)
      - Pn = Fcr × Ag (nominal capacity)
      - φPn = 0.90 × Pn (LRFD design strength)
      
      **5. Flexural Capacity**
      - Check strong-axis bending (AISC F2)
      - Check weak-axis bending (AISC F6)
      - Use interaction equation (AISC H1)
      
      **6. Combined Forces (AISC H1)**
      - Interaction equation: Pr/Pc + Mrx/Mcx + Mry/Mcy ≤ 1.0
      - Pr = required axial load
      - Pc = available axial capacity
      - Mrx, Mry = required moments
      - Mcx, Mcy = available moments
      
      **Output JSON:**
      {
        "design_status": "pass|fail|warning",
        "selected_shape": "string",
        "material": "string",
        "compression_check": {
          "required_load_kips": number,
          "available_load_kips": number,
          "dcr": number,
          "klr": number,
          "status": "pass|fail"
        },
        "flexural_check": {
          "required_moment_kip_ft": number,
          "available_moment_kip_ft": number,
          "dcr": number,
          "status": "pass|fail"
        },
        "interaction_check": {
          "interaction_ratio": number,
          "limit": 1.0,
          "status": "pass|fail"
        },
        "aisc_references": ["E3", "F2", "H1"],
        "recommendations": ["string"]
      }
    variables:
      - column_data
      - axial_load
      - moment_x
      - moment_y
      - k_factor
      - length
      - effective_length
      - shape
      - material
      - rx
      - ry
      - klr_x
      - klr_y
      - klr_max
    tags:
      - aisc
      - structural
      - column
      - design
    model_hint: "claude-sonnet-4"
    temperature: 0.2
    max_tokens: 3000

  - id: "structural.aisc_connection_designer"
    name: "AISC Connection Design Expert"
    description: "Design steel connections per AISC 360-16"
    type: "chain_of_thought"
    category: "engineering"
    content: |
      Design a steel connection per AISC 360-16:
      
      **Connection Requirements:**
      ${connection_data}
      
      **Connection Type:** ${connection_type} (bolted_shear, bolted_moment, welded_shear, welded_moment, shear_tab, clip_angle)
      
      **Design Process:**
      
      **1. Load Analysis**
      - Shear load: ${shear_load} kips
      - Moment load: ${moment_load} kip-ft (if applicable)
      - Axial load: ${axial_load} kips (if applicable)
      
      **2. Bolt Design (if bolted)**
      - Bolt diameter: ${bolt_dia}" (3/4", 7/8", 1")
      - Bolt grade: ${bolt_grade} (A325, A490)
      - Number of bolts: ${bolt_count}
      - Bolt spacing: ${spacing}" (min 2.67d, max 14t or 7")
      - Edge distance: ${edge_dist}" (min 1.5d per AISC J3.4)
      
      **Bolt Capacity:**
      - Shear capacity: Rn = Fnv × Ab × number of bolts
        - Fnv = 54 ksi (A325), 68 ksi (A490)
        - Ab = π × (d/2)²
      - Bearing capacity: Rn = 1.2LctFu ≤ 2.4dtFu
        - Lc = clear distance
        - t = plate thickness
        - Fu = ultimate strength
      - Tension capacity: Rn = Fnt × Ab
        - Fnt = 90 ksi (A325), 113 ksi (A490)
      
      **3. Weld Design (if welded)**
      - Weld type: ${weld_type} (fillet, groove)
      - Weld size: ${weld_size}" (leg size for fillet)
      - Electrode: ${electrode} (E70XX, E80XX)
      - Weld length: ${weld_length}"
      
      **Weld Capacity:**
      - Fillet weld: Rn = 0.6 × FEXX × 0.707 × weld_size × length
        - FEXX = 70 ksi (E70XX), 80 ksi (E80XX)
      - Groove weld: Rn = 0.6 × FEXX × throat × length
      
      **4. Plate Design**
      - Plate thickness: ${plate_thickness}"
      - Plate material: ${plate_material}
      - Check block shear (AISC J4.3)
      - Check net section (AISC J4.1)
      
      **5. Connection Geometry**
      - Gage: ${gage}" (standard: 3", 3.5", 5.5")
      - Pitch: ${pitch}" (bolt spacing)
      - Verify geometry fits within member dimensions
      
      **Output JSON:**
      {
        "design_status": "pass|fail|warning",
        "connection_type": "string",
        "bolt_design": {
          "bolt_size": "string",
          "bolt_grade": "string",
          "bolt_count": number,
          "shear_capacity_kips": number,
          "bearing_capacity_kips": number,
          "required_capacity_kips": number,
          "dcr": number,
          "status": "pass|fail"
        },
        "weld_design": {
          "weld_type": "string",
          "weld_size": number,
          "weld_capacity_kips": number,
          "required_capacity_kips": number,
          "dcr": number,
          "status": "pass|fail"
        },
        "plate_design": {
          "thickness": number,
          "block_shear_ok": true|false,
          "net_section_ok": true|false,
          "status": "pass|fail"
        },
        "aisc_references": ["J3", "J4", "J2"],
        "recommendations": ["string"]
      }
    variables:
      - connection_data
      - connection_type
      - shear_load
      - moment_load
      - axial_load
      - bolt_dia
      - bolt_grade
      - bolt_count
      - spacing
      - edge_dist
      - weld_type
      - weld_size
      - electrode
      - weld_length
      - plate_thickness
      - plate_material
      - gage
      - pitch
    tags:
      - aisc
      - structural
      - connection
      - bolts
      - welding
    model_hint: "claude-sonnet-4"
    temperature: 0.2
    max_tokens: 3000

  # ========================================================================
  # ASME PRESSURE VESSEL & PIPING PROMPTS
  # ========================================================================
  
  - id: "pressure.asme_viii_vessel_designer"
    name: "ASME VIII Pressure Vessel Designer"
    description: "Design and validate pressure vessels per ASME VIII Div. 1"
    type: "chain_of_thought"
    category: "engineering"
    content: |
      Design a pressure vessel per ASME VIII Div. 1:
      
      **Vessel Requirements:**
      ${vessel_data}
      
      **Design Process:**
      
      **1. Design Conditions**
      - Design pressure: ${design_pressure} PSI
      - Design temperature: ${design_temp}°F
      - Operating pressure: ${operating_pressure} PSI
      - Operating temperature: ${operating_temp}°F
      - Material: ${material} (SA-516 Gr70, SA-240 Type 316, etc.)
      - Allowable stress: S = ${allowable_stress} ksi (from ASME II-D)
      
      **2. Shell Thickness (UG-27)**
      - Inside diameter: ${id}" 
      - Corrosion allowance: ${ca}" (typically 0.125")
      - Joint efficiency: E = ${joint_efficiency} (0.85 for double-welded butt, 1.0 for seamless)
      - Minimum thickness: t = (P × R) / (S × E - 0.6P) + CA
      - t = (${design_pressure} × ${radius}) / (${allowable_stress} × ${joint_efficiency} - 0.6 × ${design_pressure}) + ${ca}
      - t = ${calculated_thickness}"
      - Standard plate thickness: ${standard_thickness}" (round up)
      
      **3. Head Design**
      - Head type: ${head_type} (ellipsoidal, hemispherical, torispherical)
      - Ellipsoidal (2:1): t = (P × D) / (2S × E - 0.2P) + CA
      - Hemispherical: t = (P × R) / (2S × E - 0.2P) + CA
      - Torispherical: Use ASME VIII Fig. UG-34
      
      **4. Nozzle Reinforcement (UG-37)**
      - Nozzle diameter: ${nozzle_dia}"
      - Required reinforcement area: Ar = d × tr × F
        - d = nozzle diameter
        - tr = required shell thickness
        - F = correction factor (1.0 for set-in nozzles)
      - Available reinforcement: A1 + A2 + A3 + A4 ≥ Ar
        - A1 = excess shell thickness
        - A2 = excess nozzle thickness
        - A3 = weld area
        - A4 = pad area (if used)
      
      **5. Hydrostatic Test (UG-99)**
      - Test pressure: Pt = 1.3 × MAWP × (St/S)
        - MAWP = Maximum Allowable Working Pressure
        - St = stress at test temperature
        - S = stress at design temperature
      - Minimum test pressure: 1.25 × MAWP
      
      **6. Openings**
      - Maximum opening without reinforcement: d ≤ 0.5√(R × t)
      - Multiple openings: Check spacing requirements
      - Flange connections: Verify ASME B16.5 compatibility
      
      **Output JSON:**
      {
        "design_status": "pass|fail|warning",
        "shell_design": {
          "calculated_thickness_in": number,
          "standard_thickness_in": number,
          "corrosion_allowance_in": number,
          "status": "pass|fail"
        },
        "head_design": {
          "head_type": "string",
          "calculated_thickness_in": number,
          "standard_thickness_in": number,
          "status": "pass|fail"
        },
        "nozzle_reinforcement": {
          "required_area_in2": number,
          "available_area_in2": number,
          "reinforcement_adequate": true|false,
          "status": "pass|fail"
        },
        "hydrostatic_test": {
          "test_pressure_psi": number,
          "minimum_test_pressure_psi": number,
          "status": "pass|fail"
        },
        "asme_references": ["UG-27", "UG-37", "UG-99"],
        "recommendations": ["string"]
      }
    variables:
      - vessel_data
      - design_pressure
      - design_temp
      - operating_pressure
      - operating_temp
      - material
      - allowable_stress
      - id
      - ca
      - joint_efficiency
      - radius
      - calculated_thickness
      - standard_thickness
      - head_type
      - nozzle_dia
    tags:
      - asme-viii
      - pressure-vessel
      - design
      - validation
    model_hint: "claude-sonnet-4"
    temperature: 0.2
    max_tokens: 3000

  - id: "piping.asme_b31_3_designer"
    name: "ASME B31.3 Piping Designer"
    description: "Design and validate process piping per ASME B31.3"
    type: "chain_of_thought"
    category: "engineering"
    content: |
      Design process piping per ASME B31.3:
      
      **Piping Requirements:**
      ${piping_data}
      
      **Design Process:**
      
      **1. Design Conditions**
      - Design pressure: ${design_pressure} PSIG
      - Design temperature: ${design_temp}°F
      - Material: ${material} (A106-B, A312 TP316, etc.)
      - Allowable stress: S = ${allowable_stress} ksi (from B31.3 Table A-1)
      - Quality factor: E = ${quality_factor} (from Table A-1B)
      - Weld joint strength reduction: W = ${weld_factor} (1.0 for seamless)
      
      **2. Pipe Wall Thickness (304.1.2)**
      - Nominal size: ${nominal_size}" (NPS)
      - Outside diameter: D = ${od}" (from B36.10M)
      - Minimum thickness: tm = (P × D) / (2(S × E × W + P × Y)) + CA
        - P = design pressure
        - Y = coefficient (0.4 for ferritic, 0.7 for austenitic)
        - CA = corrosion allowance
      - tm = (${design_pressure} × ${od}) / (2(${allowable_stress} × ${quality_factor} × ${weld_factor} + ${design_pressure} × ${y_coefficient})) + ${ca}
      - Standard wall: Check schedule (10, 40, 80, 160, XXS)
      
      **3. Pressure Rating**
      - Maximum allowable pressure: P = 2 × S × E × W × t / (D - 2Yt)
      - Verify P ≥ design pressure
      
      **4. Flexibility Analysis (319.4)**
      - Thermal expansion: ΔL = α × L × ΔT
        - α = coefficient of thermal expansion
        - L = pipe length
        - ΔT = temperature change
      - Stress range: SE = √(Sb² + 4St²) ≤ SA
        - Sb = bending stress
        - St = torsional stress
        - SA = allowable stress range
      - SA = f(1.25Sc + 0.25Sh) for sustained loads
        - Sc = cold allowable stress
        - Sh = hot allowable stress
        - f = stress range reduction factor
      
      **5. Branch Reinforcement (304.3)**
      - Branch connection: ${branch_size}" NPS
      - Required reinforcement area: Ar = th × d1
        - th = header thickness
        - d1 = branch inside diameter
      - Available reinforcement: Check pad, weldolet, or integrally reinforced fitting
      
      **6. Flange Rating**
      - Verify flange rating ≥ design pressure at design temperature
      - Use ASME B16.5 pressure-temperature ratings
      
      **Output JSON:**
      {
        "design_status": "pass|fail|warning",
        "wall_thickness": {
          "calculated_thickness_in": number,
          "standard_schedule": "string",
          "standard_thickness_in": number,
          "status": "pass|fail"
        },
        "pressure_rating": {
          "max_allowable_pressure_psi": number,
          "design_pressure_psi": number,
          "status": "pass|fail"
        },
        "flexibility": {
          "thermal_expansion_in": number,
          "stress_range_ksi": number,
          "allowable_stress_range_ksi": number,
          "status": "pass|fail"
        },
        "branch_reinforcement": {
          "required_area_in2": number,
          "available_area_in2": number,
          "reinforcement_adequate": true|false,
          "status": "pass|fail"
        },
        "b31_3_references": ["304.1.2", "319.4", "304.3"],
        "recommendations": ["string"]
      }
    variables:
      - piping_data
      - design_pressure
      - design_temp
      - material
      - allowable_stress
      - quality_factor
      - weld_factor
      - nominal_size
      - od
      - y_coefficient
      - ca
      - branch_size
    tags:
      - asme-b31.3
      - piping
      - design
      - process-piping
    model_hint: "claude-sonnet-4"
    temperature: 0.2
    max_tokens: 3000

  # ========================================================================
  # OSHA SAFETY PROMPTS
  # ========================================================================
  
  - id: "safety.osha_handrail_validator"
    name: "OSHA Handrail Validator"
    description: "Validate handrails per OSHA 1910.29"
    type: "structured"
    category: "validation"
    content: |
      Validate handrail design per OSHA 1910.29:
      
      **Handrail Data:**
      ${handrail_data}
      
      **OSHA 1910.29 Requirements:**
      
      **1. Height Requirements**
      - Top rail height: ${top_rail_height}" (must be 42" ± 3" from walking surface)
      - Mid-rail height: ${mid_rail_height}" (must be 21" from walking surface)
      - Toe board height: ${toe_board_height}" (must be ≥ 3.5" minimum)
      
      **2. Load Requirements**
      - Top rail: 200 lbs applied in any direction
      - Mid-rail: 150 lbs applied in any direction
      - Posts: 200 lbs applied in any direction
      - Spacing: Posts ≤ 8' on center
      
      **3. Opening Requirements**
      - Maximum opening: 19" (to prevent passage of 19" sphere)
      - Intermediate rails: Required if opening > 19"
      - Toe board: Required if objects could fall
      
      **4. Material Requirements**
      - Minimum diameter: 1.5" for top rail (pipe/tube)
      - Minimum thickness: 0.125" for structural members
      - Material: ${material} (steel, aluminum, composite)
      
      **5. End Conditions**
      - Handrails must extend beyond top/bottom of stairs
      - Minimum extension: 12" beyond last step
      - Return to wall or post
      
      **Output JSON:**
      {
        "validation_status": "pass|fail|warning",
        "height_checks": {
          "top_rail_height_in": number,
          "top_rail_compliant": true|false,
          "mid_rail_height_in": number,
          "mid_rail_compliant": true|false,
          "toe_board_height_in": number,
          "toe_board_compliant": true|false
        },
        "load_checks": {
          "top_rail_adequate": true|false,
          "mid_rail_adequate": true|false,
          "post_spacing_ok": true|false
        },
        "opening_checks": {
          "max_opening_in": number,
          "opening_compliant": true|false,
          "intermediate_rails_required": true|false
        },
        "issues": [
          {
            "check": "string",
            "requirement": "string",
            "actual": "string",
            "status": "pass|fail|warning"
          }
        ],
        "osha_reference": "1910.29",
        "recommendations": ["string"]
      }
    variables:
      - handrail_data
      - top_rail_height
      - mid_rail_height
      - toe_board_height
      - material
    tags:
      - osha
      - safety
      - handrail
      - validation
    model_hint: "claude-sonnet-4"
    temperature: 0.2
    max_tokens: 2000

  - id: "safety.osha_ladder_validator"
    name: "OSHA Ladder Validator"
    description: "Validate ladders per OSHA 1910.27"
    type: "structured"
    category: "validation"
    content: |
      Validate ladder design per OSHA 1910.27:
      
      **Ladder Data:**
      ${ladder_data}
      
      **OSHA 1910.27 Requirements:**
      
      **1. Fixed Ladder Requirements**
      - Rung spacing: ${rung_spacing}" (must be 12" ± 2" uniform)
      - Rung diameter: ${rung_dia}" (must be ≥ 0.75" for metal, ≥ 1.25" for wood)
      - Side rail clearance: ${side_rail_clearance}" (must be ≥ 7" from wall)
      - Ladder width: ${ladder_width}" (must be ≥ 16" between side rails)
      
      **2. Safety Requirements**
      - Cage required if height > 20' (OSHA 1910.27(d))
      - Landing platforms required every 30' or less
      - Ladder extensions: 3.5' minimum above landing
      - Clearance: 7" minimum from wall
      
      **3. Load Requirements**
      - Design load: 250 lbs concentrated + 100 lbs/ft distributed
      - Safety factor: 4:1 minimum
      
      **4. Material Requirements**
      - Rung material: ${rung_material} (steel, aluminum, fiberglass)
      - Side rail material: ${side_rail_material}
      - Corrosion protection required for steel
      
      **Output JSON:**
      {
        "validation_status": "pass|fail|warning",
        "dimension_checks": {
          "rung_spacing_ok": true|false,
          "rung_diameter_ok": true|false,
          "side_rail_clearance_ok": true|false,
          "ladder_width_ok": true|false
        },
        "safety_checks": {
          "cage_required": true|false,
          "cage_provided": true|false,
          "landing_platforms_ok": true|false,
          "extension_height_ok": true|false
        },
        "load_checks": {
          "design_load_adequate": true|false,
          "safety_factor": number
        },
        "issues": [
          {
            "check": "string",
            "requirement": "string",
            "actual": "string",
            "status": "pass|fail|warning"
          }
        ],
        "osha_reference": "1910.27",
        "recommendations": ["string"]
      }
    variables:
      - ladder_data
      - rung_spacing
      - rung_dia
      - side_rail_clearance
      - ladder_width
      - rung_material
      - side_rail_material
    tags:
      - osha
      - safety
      - ladder
      - validation
    model_hint: "claude-sonnet-4"
    temperature: 0.2
    max_tokens: 2000

  # ========================================================================
  # THERMAL & PERFORMANCE PROMPTS
  # ========================================================================
  
  - id: "thermal.ache_performance_calculator"
    name: "ACHE Thermal Performance Calculator"
    description: "Calculate ACHE thermal performance per API 661"
    type: "chain_of_thought"
    category: "engineering"
    content: |
      Calculate thermal performance for this ACHE design:
      
      **Design Data:**
      ${thermal_data}
      
      **Calculation Process:**
      
      **1. Heat Duty**
      - Process flow rate: ${flow_rate} kg/s
      - Process inlet temp: ${t_in}°C
      - Process outlet temp: ${t_out}°C
      - Specific heat: ${cp} J/kg-K
      - Heat duty: Q = m × cp × (T_in - T_out)
      - Q = ${flow_rate} × ${cp} × (${t_in} - ${t_out}) = ${duty} kW
      
      **2. LMTD Calculation**
      - Air inlet: ${t_air_in}°C
      - Air outlet: ${t_air_out}°C
      - LMTD = (ΔT1 - ΔT2) / ln(ΔT1/ΔT2)
        - ΔT1 = ${t_in} - ${t_air_out} = ${delta_t1}°C
        - ΔT2 = ${t_out} - ${t_air_in} = ${delta_t2}°C
      - LMTD = ${lmtd}°C
      - Correction factor: F = ${correction_factor} (for crossflow)
      
      **3. Overall Heat Transfer Coefficient**
      - Clean U: ${u_clean} W/m²-K
      - Fouling factor: ${fouling_factor} m²-K/W
      - U_fouled = 1 / (1/U_clean + R_fouling)
      - U_fouled = ${u_fouled} W/m²-K
      
      **4. Required Surface Area**
      - A = Q / (U × F × LMTD)
      - A = ${duty} / (${u_fouled} × ${correction_factor} × ${lmtd})
      - A = ${required_area} m²
      - Actual area: ${actual_area} m²
      - Overdesign: ((A_actual - A_required) / A_required) × 100 = ${overdesign}%
      
      **5. Air-Side Performance**
      - Air flow rate: ${air_flow} kg/s
      - Fan diameter: ${fan_dia} m
      - Fan speed: ${fan_speed} RPM
      - Tip speed: v = π × D × N / 60 = ${tip_speed} m/s
      - API 661 limit: ≤ 61 m/s (200 ft/s)
      
      **6. Pressure Drop**
      - Tube-side ΔP: ${tube_dp} kPa
      - Air-side ΔP: ${air_dp} Pa
      - Verify within design limits
      
      **7. Approach Temperature**
      - Minimum approach: T_out_process - T_in_air = ${approach}°C
      - API 661 minimum: 5°C
      - Verify: ${approach} ≥ 5°C
      
      **Output JSON:**
      {
        "calculation_status": "pass|fail|warning",
        "heat_duty": {
          "duty_kw": number,
          "duty_mmbtu_hr": number
        },
        "thermal_performance": {
          "lmtd_c": number,
          "correction_factor": number,
          "u_clean_w_m2_k": number,
          "u_fouled_w_m2_k": number
        },
        "surface_area": {
          "required_m2": number,
          "actual_m2": number,
          "overdesign_percent": number,
          "status": "pass|fail"
        },
        "air_side": {
          "tip_speed_m_s": number,
          "tip_speed_limit_m_s": 61.0,
          "tip_speed_ok": true|false,
          "air_dp_pa": number,
          "status": "pass|fail"
        },
        "approach_temperature": {
          "min_approach_c": number,
          "minimum_required_c": 5.0,
          "status": "pass|fail"
        },
        "api_661_references": ["Section 5", "Section 6"],
        "warnings": ["string"],
        "recommendations": ["string"]
      }
    variables:
      - thermal_data
      - flow_rate
      - t_in
      - t_out
      - cp
      - duty
      - t_air_in
      - t_air_out
      - delta_t1
      - delta_t2
      - lmtd
      - correction_factor
      - u_clean
      - fouling_factor
      - u_fouled
      - required_area
      - actual_area
      - overdesign
      - air_flow
      - fan_dia
      - fan_speed
      - tip_speed
      - tube_dp
      - air_dp
      - approach
    tags:
      - ache
      - thermal
      - api661
      - calculation
      - performance
    model_hint: "claude-sonnet-4"
    temperature: 0.2
    max_tokens: 3000

  # ========================================================================
  # SHAFT & MECHANICAL PROMPTS
  # ========================================================================
  
  - id: "mechanical.shaft_designer"
    name: "Shaft Design Expert"
    description: "Design and validate shafts with keyways and stress analysis"
    type: "chain_of_thought"
    category: "engineering"
    content: |
      Design a shaft for this application:
      
      **Shaft Requirements:**
      ${shaft_data}
      
      **Design Process:**
      
      **1. Load Analysis**
      - Torque: T = ${torque} lb-in
      - Power: P = ${power} HP
      - Speed: N = ${speed} RPM
      - Relationship: T = (P × 63025) / N
      - Bending moment: M = ${moment} lb-in
      - Axial load: F = ${axial_load} lbs (if applicable)
      
      **2. Material Selection**
      - Material: ${material} (1045, 4140, 316SS)
      - Yield strength: Sy = ${sy} ksi
      - Ultimate strength: Su = ${su} ksi
      - Endurance limit: Se' = 0.5 × Su (for steel)
      - Surface finish factor: ka = ${surface_factor}
      - Size factor: kb = ${size_factor}
      - Corrected endurance: Se = ka × kb × Se'
      
      **3. Shaft Diameter (ASME B106)**
      - For combined bending and torsion:
        - Equivalent moment: Me = √(M² + (αT)²)
        - α = 1.0 for steady torque, 0.75 for fluctuating
      - Minimum diameter: d = [32 × Me / (π × Se)]^(1/3)
      - d = [32 × ${me} / (π × ${se})]^(1/3) = ${diameter}"
      
      **4. Keyway Design**
      - Key size: ${key_width}" × ${key_height}" (per ANSI B17.1)
      - Keyway depth: ${keyway_depth}"
      - Stress concentration: Kt = ${stress_concentration} (typically 2.0-3.0)
      - Check keyway stress: τ = 16T / (πd³) × Kt
      - Verify: τ ≤ 0.577 × Sy / FS (shear yield)
      
      **5. Deflection Check**
      - Maximum deflection: δ = (5wL⁴) / (384EI) or (PL³) / (48EI)
      - Limit: δ ≤ L/1000 for general, L/5000 for precision
      
      **6. Critical Speed**
      - First critical: Nc = (30/π) × √(g/δ)
        - g = 386 in/s²
        - δ = static deflection
      - Operating speed should be < 0.7 × Nc
      
      **Output JSON:**
      {
        "design_status": "pass|fail|warning",
        "shaft_design": {
          "calculated_diameter_in": number,
          "standard_diameter_in": number,
          "material": "string",
          "status": "pass|fail"
        },
        "stress_analysis": {
          "bending_stress_ksi": number,
          "torsional_stress_ksi": number,
          "equivalent_stress_ksi": number,
          "allowable_stress_ksi": number,
          "safety_factor": number,
          "status": "pass|fail"
        },
        "keyway_design": {
          "key_size": "string",
          "keyway_stress_ksi": number,
          "allowable_stress_ksi": number,
          "status": "pass|fail"
        },
        "deflection": {
          "max_deflection_in": number,
          "limit_deflection_in": number,
          "status": "pass|fail"
        },
        "critical_speed": {
          "critical_speed_rpm": number,
          "operating_speed_rpm": number,
          "speed_ratio": number,
          "status": "pass|fail"
        },
        "references": ["ASME B106", "ANSI B17.1"],
        "recommendations": ["string"]
      }
    variables:
      - shaft_data
      - torque
      - power
      - speed
      - moment
      - axial_load
      - material
      - sy
      - su
      - surface_factor
      - size_factor
      - se
      - me
      - diameter
      - key_width
      - key_height
      - keyway_depth
      - stress_concentration
    tags:
      - shaft
      - mechanical
      - design
      - keyway
    model_hint: "claude-sonnet-4"
    temperature: 0.2
    max_tokens: 3000

  - id: "mechanical.fastener_selector"
    name: "Fastener Selection Expert"
    description: "Select and validate fasteners for connections"
    type: "chain_of_thought"
    category: "engineering"
    content: |
      Select appropriate fasteners for this connection:
      
      **Connection Requirements:**
      ${connection_data}
      
      **Selection Process:**
      
      **1. Load Analysis**
      - Shear load: ${shear_load} lbs
      - Tension load: ${tension_load} lbs
      - Combined load: Check interaction
      - Load type: ${load_type} (static, dynamic, fatigue)
      
      **2. Bolt Size Selection**
      - Required capacity: ${required_capacity} lbs
      - Try bolt: ${bolt_size}" (1/4", 5/16", 3/8", 1/2", 5/8", 3/4", 7/8", 1")
      - Bolt grade: ${bolt_grade} (A325, A490, Grade 5, Grade 8)
      
      **Bolt Capacities:**
      - Tensile area: At = ${tensile_area} in² (from ASME B18.2.1)
      - Shear capacity: Rn = Fnv × At × number of bolts
        - Fnv = 54 ksi (A325), 68 ksi (A490), 84 ksi (Grade 8)
      - Tension capacity: Rn = Fnt × At
        - Fnt = 90 ksi (A325), 113 ksi (A490), 150 ksi (Grade 8)
      - Combined: Check interaction equation
      
      **3. Thread Engagement**
      - Minimum engagement: L = ${min_engagement}" (typically 1.5 × bolt diameter)
      - Thread length: ${thread_length}"
      - Verify: L ≥ 1.5d
      
      **4. Hole Type**
      - Standard hole: d + 1/16" (AISC J3.2)
      - Oversized hole: d + 1/8"
      - Slotted hole: d + 1/16" × length
      - Verify clearance for installation
      
      **5. Washer Requirements**
      - Flat washer: Required for oversized/slotted holes
      - Hardened washer (F436): Required for A325/A490 in slip-critical
      - Lock washer: For vibration applications
      
      **6. Nut Selection**
      - Match bolt grade (A325 nut with A325 bolt)
      - Heavy hex nut: Standard
      - Nyloc nut: For vibration
      
      **Output JSON:**
      {
        "selection_status": "pass|fail|warning",
        "bolt_selection": {
          "bolt_size": "string",
          "bolt_grade": "string",
          "bolt_count": number,
          "tensile_area_in2": number
        },
        "capacity_checks": {
          "shear_capacity_lbs": number,
          "tension_capacity_lbs": number,
          "required_capacity_lbs": number,
          "safety_factor": number,
          "status": "pass|fail"
        },
        "thread_engagement": {
          "minimum_engagement_in": number,
          "actual_engagement_in": number,
          "status": "pass|fail"
        },
        "hardware": {
          "washers_required": true|false,
          "washer_type": "string",
          "nut_type": "string"
        },
        "references": ["ASME B18.2.1", "AISC J3"],
        "recommendations": ["string"]
      }
    variables:
      - connection_data
      - shear_load
      - tension_load
      - load_type
      - required_capacity
      - bolt_size
      - bolt_grade
      - tensile_area
      - min_engagement
      - thread_length
    tags:
      - fasteners
      - bolts
      - connections
      - selection
    model_hint: "claude-sonnet-4"
    temperature: 0.2
    max_tokens: 2500

  # ========================================================================
  # HEAT EXCHANGER PROMPTS
  # ========================================================================
  
  - id: "heat_exchanger.tema_validator"
    name: "TEMA Heat Exchanger Validator"
    description: "Validate shell & tube heat exchangers per TEMA"
    type: "chain_of_thought"
    category: "validation"
    content: |
      Validate this shell & tube heat exchanger per TEMA:
      
      **Heat Exchanger Data:**
      ${hx_data}
      
      **TEMA Classification:**
      - TEMA Class: ${tema_class} (R, C, or B)
        - R: Severe service (refineries, chemical)
        - C: General service (commercial)
        - B: Chemical process service
      - Front head: ${front_head} (A, B, C, N, D)
      - Shell: ${shell} (E, F, G, H, J, K, X)
      - Rear head: ${rear_head} (L, M, N, P, S, T, U, W)
      - Example: ${tema_designation} (e.g., AES, BEM, CFU)
      
      **Design Checks:**
      
      **1. Shell Design**
      - Shell ID: ${shell_id}"
      - Shell thickness: ${shell_thickness}" (per ASME VIII)
      - Baffle spacing: ${baffle_spacing}" (20-100% of shell ID typical)
      - Baffle cut: ${baffle_cut}% (15-45% typical)
      - Number of baffles: ${baffle_count}
      
      **2. Tube Design**
      - Tube OD: ${tube_od}" (5/8", 3/4", 1")
      - Tube thickness: ${tube_thickness}" (BWG or schedule)
      - Tube length: ${tube_length}ft
      - Tube count: ${tube_count}
      - Tube pitch: ${tube_pitch}" (1.25 × OD typical)
      - Tube layout: ${layout} (30°, 60°, 90°, 45°)
      
      **3. Tube Sheet**
      - Thickness: ${tubesheet_thickness}" (per TEMA RCB-7)
      - Minimum: 1" for small exchangers, 2" for large
      - Gasket surface: Verify flatness per TEMA
      
      **4. Nozzles**
      - Shell nozzle: ${shell_nozzle}" NPS
      - Tube nozzle: ${tube_nozzle}" NPS
      - Nozzle projection: ${nozzle_projection}" (per TEMA)
      - Flange rating: ${flange_rating} (150#, 300#, 600#)
      
      **5. Expansion Joint**
      - Required if ΔT > ${delta_t_limit}°F
      - Actual ΔT: ${delta_t}°F
      - Expansion joint type: ${expansion_joint_type} (if required)
      
      **Output JSON:**
      {
        "validation_status": "pass|fail|warning",
        "tema_classification": {
          "class": "string",
          "designation": "string",
          "front_head": "string",
          "shell": "string",
          "rear_head": "string"
        },
        "shell_design": {
          "baffle_spacing_ok": true|false,
          "baffle_cut_ok": true|false,
          "status": "pass|fail"
        },
        "tube_design": {
          "tube_pitch_ok": true|false,
          "tube_count_adequate": true|false,
          "status": "pass|fail"
        },
        "tubesheet": {
          "thickness_adequate": true|false,
          "status": "pass|fail"
        },
        "expansion_joint": {
          "required": true|false,
          "provided": true|false,
          "status": "pass|fail"
        },
        "tema_references": ["RCB-7", "RCB-8"],
        "issues": [
          {
            "check": "string",
            "requirement": "string",
            "actual": "string",
            "status": "pass|fail"
          }
        ],
        "recommendations": ["string"]
      }
    variables:
      - hx_data
      - tema_class
      - front_head
      - shell
      - rear_head
      - tema_designation
      - shell_id
      - shell_thickness
      - baffle_spacing
      - baffle_cut
      - baffle_count
      - tube_od
      - tube_thickness
      - tube_length
      - tube_count
      - tube_pitch
      - layout
      - tubesheet_thickness
      - shell_nozzle
      - tube_nozzle
      - nozzle_projection
      - flange_rating
      - delta_t_limit
      - delta_t
      - expansion_joint_type
    tags:
      - tema
      - heat-exchanger
      - shell-tube
      - validation
    model_hint: "claude-sonnet-4"
    temperature: 0.2
    max_tokens: 2500

  # ========================================================================
  # MOTOR & DRIVE PROMPTS
  # ========================================================================
  
  - id: "motor.nema_motor_validator"
    name: "NEMA Motor Validator"
    description: "Validate motors per NEMA MG-1"
    type: "structured"
    category: "validation"
    content: |
      Validate motor selection per NEMA MG-1:
      
      **Motor Data:**
      ${motor_data}
      
      **NEMA MG-1 Requirements:**
      
      **1. Motor Frame**
      - Frame size: ${frame_size} (143T, 145T, 182T, 184T, etc.)
      - Verify NEMA standard frame
      - Shaft height: ${shaft_height}" (per NEMA Table)
      - Base dimensions: ${base_length}" × ${base_width}"
      
      **2. Motor Rating**
      - HP: ${hp} HP
      - Speed: ${speed} RPM (1800, 3600, etc.)
      - Voltage: ${voltage} V (230/460, 575, etc.)
      - Phase: ${phase} (1 or 3)
      - Frequency: ${frequency} Hz (50 or 60)
      
      **3. Enclosure Type**
      - Enclosure: ${enclosure} (TEFC, ODP, XP, etc.)
        - TEFC: Totally Enclosed Fan Cooled
        - ODP: Open Drip Proof
        - XP: Explosion Proof
      - Verify suitability for environment
      
      **4. Service Factor**
      - Standard service factor: ${service_factor} (typically 1.15 for general purpose)
      - Required service factor: ${required_sf}
      - Verify: SF_motor ≥ SF_required
      
      **5. Efficiency**
      - Efficiency: ${efficiency}% (per NEMA Table 12-11)
      - Energy efficiency: Premium efficiency (IE3) or standard
      - Power factor: ${power_factor} (typically 0.85-0.95)
      
      **6. Starting Torque**
      - Locked rotor torque: ${lrt}% of full load (per NEMA Table)
      - Pull-up torque: ${put}% of full load
      - Breakdown torque: ${bdt}% of full load
      - Verify adequate for application
      
      **Output JSON:**
      {
        "validation_status": "pass|fail|warning",
        "frame_check": {
          "frame_size": "string",
          "nema_standard": true|false,
          "dimensions_ok": true|false,
          "status": "pass|fail"
        },
        "rating_check": {
          "hp_adequate": true|false,
          "speed_correct": true|false,
          "voltage_match": true|false,
          "status": "pass|fail"
        },
        "enclosure_check": {
          "enclosure_type": "string",
          "environment_suitable": true|false,
          "status": "pass|fail"
        },
        "service_factor": {
          "motor_sf": number,
          "required_sf": number,
          "adequate": true|false,
          "status": "pass|fail"
        },
        "efficiency": {
          "efficiency_percent": number,
          "nema_minimum": number,
          "status": "pass|fail"
        },
        "nema_references": ["MG-1 Table 12-11", "MG-1 Table 10-1"],
        "issues": [
          {
            "check": "string",
            "requirement": "string",
            "actual": "string",
            "status": "pass|fail"
          }
        ],
        "recommendations": ["string"]
      }
    variables:
      - motor_data
      - frame_size
      - shaft_height
      - base_length
      - base_width
      - hp
      - speed
      - voltage
      - phase
      - frequency
      - enclosure
      - service_factor
      - required_sf
      - efficiency
      - power_factor
      - lrt
      - put
      - bdt
    tags:
      - nema
      - motor
      - mg-1
      - validation
    model_hint: "claude-sonnet-4"
    temperature: 0.2
    max_tokens: 2000

  # ========================================================================
  # COATING & FINISHING PROMPTS
  # ========================================================================
  
  - id: "coating.sspc_system_selector"
    name: "SSPC Coating System Selector"
    description: "Select coating systems per SSPC standards"
    type: "chain_of_thought"
    category: "engineering"
    content: |
      Select appropriate coating system per SSPC:
      
      **Application Requirements:**
      ${coating_data}
      
      **Selection Process:**
      
      **1. Environment Classification**
      - Environment: ${environment} (C1, C2, C3, C4, C5-I, C5-M)
        - C1: Very low corrosivity (interior, dry)
        - C2: Low corrosivity (interior, low humidity)
        - C3: Moderate corrosivity (interior, high humidity)
        - C4: High corrosivity (exterior, industrial)
        - C5-I: Very high corrosivity (industrial)
        - C5-M: Very high corrosivity (marine)
      - Service life: ${service_life} years
      
      **2. Surface Preparation (SSPC-SP)**
      - SP1: Solvent cleaning
      - SP2: Hand tool cleaning
      - SP3: Power tool cleaning
      - SP5: White metal blast (Sa 2.5)
      - SP6: Commercial blast (Sa 2)
      - SP7: Brush-off blast (Sa 1)
      - SP10: Near-white blast (Sa 2.5)
      - Recommended: ${surface_prep}
      
      **3. Coating System Selection**
      
      **For C3 Environment (15-25 year life):**
      - Primer: Epoxy, 3-5 mils
      - Intermediate: Epoxy or polyurethane, 3-5 mils
      - Topcoat: Polyurethane, 2-3 mils
      - Total DFT: 8-13 mils
      
      **For C4 Environment (15-25 year life):**
      - Primer: Zinc-rich epoxy, 3-5 mils
      - Intermediate: Epoxy, 5-8 mils
      - Topcoat: Polyurethane or fluoropolymer, 2-3 mils
      - Total DFT: 10-16 mils
      
      **For C5 Environment (15-25 year life):**
      - Primer: Zinc-rich epoxy, 3-5 mils
      - Intermediate: Epoxy, 5-10 mils
      - Topcoat: Fluoropolymer or high-performance polyurethane, 2-4 mils
      - Total DFT: 10-19 mils
      
      **4. Coating Specification**
      - System: ${coating_system} (e.g., "SSPC-Paint 20")
      - Primer: ${primer_type}, ${primer_thickness} mils DFT
      - Intermediate: ${intermediate_type}, ${intermediate_thickness} mils DFT
      - Topcoat: ${topcoat_type}, ${topcoat_thickness} mils DFT
      - Total DFT: ${total_dft} mils
      
      **5. Quality Control**
      - Surface profile: ${profile} mils (1.5-4.0 mils typical)
      - Dry film thickness: Verify per SSPC-PA 2
      - Adhesion: Per ASTM D4541
      - Holiday detection: Per SSPC-PA 7 (for immersion service)
      
      **Output JSON:**
      {
        "selection_status": "pass|fail|warning",
        "environment": {
          "classification": "string",
          "corrosivity": "very_low|low|moderate|high|very_high",
          "service_life_years": number
        },
        "surface_preparation": {
          "sspc_standard": "string",
          "description": "string",
          "profile_mils": number
        },
        "coating_system": {
          "system_name": "string",
          "primer": {
            "type": "string",
            "thickness_mils": number
          },
          "intermediate": {
            "type": "string",
            "thickness_mils": number
          },
          "topcoat": {
            "type": "string",
            "thickness_mils": number
          },
          "total_dft_mils": number
        },
        "quality_control": {
          "profile_requirement_mils": "string",
          "dft_verification": "SSPC-PA 2",
          "adhesion_test": "ASTM D4541"
        },
        "sspc_references": ["SSPC-Paint 20", "SSPC-SP 10", "SSPC-PA 2"],
        "recommendations": ["string"]
      }
    variables:
      - coating_data
      - environment
      - service_life
      - surface_prep
      - coating_system
      - primer_type
      - primer_thickness
      - intermediate_type
      - intermediate_thickness
      - topcoat_type
      - topcoat_thickness
      - total_dft
      - profile
    tags:
      - sspc
      - coating
      - finishing
      - corrosion
    model_hint: "claude-sonnet-4"
    temperature: 0.3
    max_tokens: 2500

  # ========================================================================
  # DOCUMENTATION & QUALITY PROMPTS
  # ========================================================================
  
  - id: "documentation.drawing_completeness_checker"
    name: "Drawing Completeness Checker"
    description: "Verify engineering drawings have all required elements"
    type: "structured"
    category: "validation"
    content: |
      Check this engineering drawing for completeness:
      
      **Drawing Data:**
      ${drawing_data}
      
      **Completeness Checklist:**
      
      **1. Title Block**
      - [ ] Drawing number: ${drawing_number}
      - [ ] Revision: ${revision}
      - [ ] Title: ${title}
      - [ ] Date: ${date}
      - [ ] Drafter: ${drafter}
      - [ ] Checker: ${checker}
      - [ ] Approver: ${approver}
      - [ ] Scale: ${scale}
      - [ ] Sheet size: ${sheet_size} (A, B, C, D, E)
      
      **2. Views**
      - [ ] Front view present
      - [ ] Top view present
      - [ ] Right side view present
      - [ ] Isometric view (if complex)
      - [ ] Section views (if needed): ${section_views}
      - [ ] Detail views: ${detail_views}
      
      **3. Dimensions**
      - [ ] All critical dimensions shown
      - [ ] Tolerances specified
      - [ ] Datum features identified
      - [ ] GD&T callouts present (if required)
      - [ ] Dual units (imperial/metric) if specified
      
      **4. Annotations**
      - [ ] Material callout: ${material}
      - [ ] Finish requirements: ${finish}
      - [ ] General notes: ${notes_count} notes
      - [ ] Revision notes: ${revision_notes}
      - [ ] Weld symbols (if applicable)
      - [ ] Surface finish symbols
      
      **5. Bill of Materials**
      - [ ] BOM table present
      - [ ] All parts listed
      - [ ] Quantities specified
      - [ ] Part numbers complete
      - [ ] Materials called out
      
      **6. Standards References**
      - [ ] Applicable standards listed
      - [ ] Code references (ASME, AWS, etc.)
      - [ ] Company standards referenced
      
      **Output JSON:**
      {
        "completeness_score": 0-100,
        "title_block": {
          "complete": true|false,
          "missing_fields": ["string"],
          "status": "pass|fail"
        },
        "views": {
          "required_views_present": true|false,
          "missing_views": ["string"],
          "status": "pass|fail"
        },
        "dimensions": {
          "all_dimensions_shown": true|false,
          "tolerances_specified": true|false,
          "gdt_present": true|false,
          "status": "pass|fail"
        },
        "annotations": {
          "material_specified": true|false,
          "finish_specified": true|false,
          "notes_complete": true|false,
          "status": "pass|fail"
        },
        "bom": {
          "present": true|false,
          "complete": true|false,
          "status": "pass|fail"
        },
        "standards": {
          "references_present": true|false,
          "status": "pass|fail"
        },
        "missing_elements": ["string"],
        "recommendations": ["string"]
      }
    variables:
      - drawing_data
      - drawing_number
      - revision
      - title
      - date
      - drafter
      - checker
      - approver
      - scale
      - sheet_size
      - section_views
      - detail_views
      - material
      - finish
      - notes_count
      - revision_notes
    tags:
      - documentation
      - drawing
      - completeness
      - validation
    model_hint: "claude-sonnet-4"
    temperature: 0.2
    max_tokens: 2000

  - id: "quality.inspection_planner"
    name: "Inspection & QC Planner"
    description: "Plan inspection and quality control per AWS D1.1 and ASME"
    type: "chain_of_thought"
    category: "validation"
    content: |
      Create an inspection plan for this fabrication:
      
      **Fabrication Data:**
      ${fabrication_data}
      
      **Inspection Planning:**
      
      **1. Weld Category Classification**
      - Weld category: ${weld_category} (A, B, C, D per AWS D1.1)
        - Category A: Critical welds (full penetration, high stress)
        - Category B: Important welds (partial penetration, moderate stress)
        - Category C: Standard welds (fillet welds, low stress)
        - Category D: Non-critical welds (attachment welds)
      - Determine inspection level based on category
      
      **2. NDE Methods**
      - Visual (VT): Required for all welds
      - Liquid Penetrant (PT): For surface defects
      - Magnetic Particle (MT): For ferromagnetic materials
      - Ultrasonic (UT): For internal defects
      - Radiographic (RT): For critical welds
      - Recommended: ${nde_methods}
      
      **3. Inspection Points**
      - Pre-weld: Material verification, joint preparation
      - During weld: Weld parameters, interpass cleaning
      - Post-weld: Visual, dimensional, NDE
      - Final: Complete assembly check
      
      **4. Acceptance Criteria**
      - Per AWS D1.1 Table 6.1 (fillet welds)
      - Per AWS D1.1 Table 6.2 (groove welds)
      - Per ASME VIII (pressure vessels)
      - Defect limits: ${defect_limits}
      
      **5. Documentation Requirements**
      - Weld map: Required
      - Weld procedure records: Required
      - NDE reports: Required for Category A/B
      - Material certs: Required
      - Final inspection report: Required
      
      **Output JSON:**
      {
        "inspection_plan": {
          "weld_category": "string",
          "inspection_level": "string",
          "nde_methods": ["string"],
          "inspection_points": [
            {
              "stage": "pre_weld|during_weld|post_weld|final",
              "checks": ["string"],
              "acceptance_criteria": "string"
            }
          ]
        },
        "documentation": {
          "required_documents": ["string"],
          "records_to_maintain": ["string"]
        },
        "acceptance_criteria": {
          "standard": "AWS D1.1|ASME VIII",
          "defect_limits": "string"
        },
        "references": ["AWS D1.1", "ASME VIII"],
        "recommendations": ["string"]
      }
    variables:
      - fabrication_data
      - weld_category
      - nde_methods
      - defect_limits
    tags:
      - inspection
      - qc
      - welding
      - aws-d1.1
    model_hint: "claude-sonnet-4"
    temperature: 0.3
    max_tokens: 2500

  # ========================================================================
  # CROSS-PART VALIDATION PROMPTS
  # ========================================================================
  
  - id: "interface.cross_part_validator"
    name: "Cross-Part Interface Validator"
    description: "Validate interface compatibility between mating parts"
    type: "chain_of_thought"
    category: "validation"
    content: |
      Validate interface compatibility between mating parts:
      
      **Interface Data:**
      ${interface_data}
      
      **Part A Interface:**
      - Part ID: ${part_a_id}
      - Interface type: ${interface_type_a} (bolted, welded, slip_fit, press_fit, mating_surface, keyway)
      - Hole pattern: ${hole_pattern_a}
      
      **Part B Interface (Mating):**
      - Part ID: ${part_b_id}
      - Interface type: ${interface_type_b}
      - Hole pattern: ${hole_pattern_b}
      
      **Validation Process:**
      
      **1. Interface Type Compatibility**
      - Verify interface types are compatible
      - Bolted interfaces require matching hole patterns
      - Slip/press fits require shaft/bore compatibility
      - Keyways require matching key sizes
      
      **2. Hole Pattern Alignment (for Bolted Connections)**
      - Bolt circle diameter: Part A = ${bcd_a}", Part B = ${bcd_b}"
      - Tolerance: ±${tolerance}" (typically ±1/16")
      - Number of holes: Part A = ${hole_count_a}, Part B = ${hole_count_b}
      - Angular spacing: 360° / ${hole_count_a} = ${angular_spacing}° (must match)
      - Center-to-center alignment: Check each hole pair
        - dx = |x_a - x_b| ≤ ${tolerance}
        - dy = |y_a - y_b| ≤ ${tolerance}
      
      **3. Hole Size Compatibility**
      - Part A hole diameter: ${hole_dia_a}"
      - Part B hole diameter: ${hole_dia_b}"
      - Size difference: |${hole_dia_a} - ${hole_dia_b}| ≤ 0.0625" (1/16")
      - Standard clearance: Hole = Bolt + 1/16" (standard hole per AISC J3.2)
      
      **4. Shaft/Bore Fit (for Slip/Press Fits)**
      - Shaft diameter: ${shaft_dia}"
      - Bore diameter: ${bore_dia}"
      - Fit class: ${fit_class} (RC1-RC9 for clearance, FN1-FN5 for interference)
      - Clearance/interference: ${bore_dia} - ${shaft_dia} = ${fit_value}"
      - Verify fit class requirements per ANSI B4.1
      
      **5. Keyway Alignment (if applicable)**
      - Keyway width: Part A = ${keyway_width_a}", Part B = ${keyway_width_b}"
      - Keyway depth: Part A = ${keyway_depth_a}", Part B = ${keyway_depth_b}"
      - Key size: ${key_width}" × ${key_height}" (per ANSI B17.1)
      - Verify key fits both keyways
      
      **6. Mating Surface Compatibility**
      - Surface flatness: Part A = ${flatness_a}", Part B = ${flatness_b}"
      - Surface finish: Part A = ${finish_a} Ra, Part B = ${finish_b} Ra
      - Gasket compatibility: ${gasket_type} (if applicable)
      - Flange face type: ${flange_face_a} vs ${flange_face_b} (must match)
      
      **7. Assembly Sequence**
      - Can parts be assembled? ${assembly_feasible}
      - Clearance for tools: ${tool_clearance_ok}
      - Access for fasteners: ${fastener_access_ok}
      
      **Output JSON:**
      {
        "validation_status": "pass|fail|warning",
        "interface_compatibility": {
          "types_compatible": true|false,
          "status": "pass|fail"
        },
        "hole_alignment": {
          "bcd_match": true|false,
          "hole_count_match": true|false,
          "angular_spacing_match": true|false,
          "center_alignment_ok": true|false,
          "misaligned_holes": [
            {
              "hole_number": number,
              "dx_in": number,
              "dy_in": number,
              "status": "pass|fail"
            }
          ],
          "status": "pass|fail"
        },
        "hole_size_compatibility": {
          "size_difference_in": number,
          "compatible": true|false,
          "status": "pass|fail"
        },
        "fit_analysis": {
          "fit_class": "string",
          "clearance_interference_in": number,
          "meets_standard": true|false,
          "status": "pass|fail"
        },
        "keyway_alignment": {
          "width_match": true|false,
          "depth_match": true|false,
          "key_fits": true|false,
          "status": "pass|fail"
        },
        "mating_surface": {
          "flatness_ok": true|false,
          "finish_compatible": true|false,
          "gasket_compatible": true|false,
          "status": "pass|fail"
        },
        "assembly_feasibility": {
          "can_assemble": true|false,
          "tool_clearance_ok": true|false,
          "fastener_access_ok": true|false,
          "status": "pass|fail"
        },
        "issues": [
          {
            "check": "string",
            "part_a": "string",
            "part_b": "string",
            "requirement": "string",
            "actual": "string",
            "status": "pass|fail|warning"
          }
        ],
        "references": ["ANSI B4.1", "AISC J3", "ANSI B17.1"],
        "recommendations": ["string"]
      }
    variables:
      - interface_data
      - part_a_id
      - interface_type_a
      - hole_pattern_a
      - part_b_id
      - interface_type_b
      - hole_pattern_b
      - bcd_a
      - bcd_b
      - tolerance
      - hole_count_a
      - hole_count_b
      - angular_spacing
      - hole_dia_a
      - hole_dia_b
      - shaft_dia
      - bore_dia
      - fit_class
      - fit_value
      - keyway_width_a
      - keyway_width_b
      - keyway_depth_a
      - keyway_depth_b
      - key_width
      - key_height
      - flatness_a
      - flatness_b
      - finish_a
      - finish_b
      - gasket_type
      - flange_face_a
      - flange_face_b
      - assembly_feasible
      - tool_clearance_ok
      - fastener_access_ok
    tags:
      - cross-part
      - interface
      - alignment
      - fit
      - validation
    model_hint: "claude-sonnet-4"
    temperature: 0.2
    max_tokens: 3000

  # ========================================================================
  # VIBRATION ANALYSIS PROMPTS
  # ========================================================================
  
  - id: "vibration.tube_bundle_analyzer"
    name: "Tube Bundle Vibration Analyzer"
    description: "Analyze tube bundle vibration per API 661"
    type: "chain_of_thought"
    category: "engineering"
    content: |
      Analyze tube bundle vibration for this ACHE design:
      
      **Vibration Data:**
      ${vibration_data}
      
      **Analysis Process:**
      
      **1. Natural Frequency Calculation**
      - Tube OD: ${tube_od}" 
      - Tube wall: ${tube_wall}"
      - Tube ID: ${tube_id}" = ${tube_od} - 2 × ${tube_wall}
      - Unsupported span: ${span}" (between supports)
      - Material: ${material} (E = ${modulus} psi, ρ = ${density} lb/ft³)
      
      **Moment of Inertia:**
      - I = π × (OD⁴ - ID⁴) / 64
      - I = π × (${tube_od}⁴ - ${tube_id}⁴) / 64 = ${moment_inertia} in⁴
      
      **Area:**
      - A = π × (OD² - ID²) / 4
      - A = π × (${tube_od}² - ${tube_id}²) / 4 = ${area} in²
      
      **Natural Frequency (Pinned-Pinned):**
      - fn = (π / (2L²)) × √(EI / (ρA)) × (1 / (2π))
      - fn = (π / (2 × ${span}²)) × √(${modulus} × ${moment_inertia} / (${density} × ${area})) × (1 / (2π))
      - fn = ${natural_freq} Hz
      
      **2. Vortex Shedding Frequency**
      - Crossflow velocity: ${crossflow_velocity} ft/s
      - Strouhal number: St = 0.2 (for cylinders)
      - Vortex frequency: fv = St × V / D
      - fv = 0.2 × ${crossflow_velocity} / (${tube_od} / 12) = ${vortex_freq} Hz
      
      **3. Resonance Check**
      - Frequency ratio: fv / fn = ${vortex_freq} / ${natural_freq} = ${freq_ratio}
      - Avoid resonance: |fv - fn| / fn > 0.2 (20% separation)
      - Check: |${vortex_freq} - ${natural_freq}| / ${natural_freq} = ${separation}%
      
      **4. Fluid-Elastic Instability**
      - Critical velocity: Vc = fn × D / (St × K)
        - K = stability parameter (typically 3-5)
      - Vc = ${natural_freq} × (${tube_od} / 12) / (0.2 × ${stability_param}) = ${critical_velocity} ft/s
      - Operating velocity: ${crossflow_velocity} ft/s
      - Safety margin: Vc / V_operating = ${safety_margin}
      - Required: ≥ 1.5 (50% margin)
      
      **5. Acoustic Resonance**
      - Acoustic frequency: fa = c / (2 × L)
        - c = speed of sound in air ≈ 1100 ft/s
        - L = characteristic length (bundle width)
      - fa = 1100 / (2 × ${bundle_width}) = ${acoustic_freq} Hz
      - Avoid: fa near fn or fv
      
      **6. Support Spacing Optimization**
      - Current span: ${span}"
      - Recommended: fn > 10 Hz (avoid low-frequency issues)
      - If fn < 10 Hz: Reduce span or add supports
      - New span for fn = 10 Hz: L_new = ${recommended_span}"
      
      **Output JSON:**
      {
        "analysis_status": "pass|fail|warning",
        "natural_frequency": {
          "fn_hz": number,
          "span_in": number,
          "status": "pass|fail",
          "recommendation": "string"
        },
        "vortex_shedding": {
          "fv_hz": number,
          "crossflow_velocity_fps": number,
          "strouhal_number": 0.2,
          "status": "pass|fail"
        },
        "resonance_check": {
          "frequency_ratio": number,
          "separation_percent": number,
          "resonance_risk": "low|moderate|high",
          "status": "pass|fail"
        },
        "fluid_elastic_instability": {
          "critical_velocity_fps": number,
          "operating_velocity_fps": number,
          "safety_margin": number,
          "margin_adequate": true|false,
          "status": "pass|fail"
        },
        "acoustic_resonance": {
          "acoustic_freq_hz": number,
          "near_natural_freq": true|false,
          "near_vortex_freq": true|false,
          "status": "pass|fail"
        },
        "support_recommendations": {
          "current_span_in": number,
          "recommended_span_in": number,
          "supports_needed": number,
          "status": "pass|fail"
        },
        "api_661_references": ["Section 6.3"],
        "warnings": ["string"],
        "recommendations": ["string"]
      }
    variables:
      - vibration_data
      - tube_od
      - tube_wall
      - tube_id
      - span
      - material
      - modulus
      - density
      - moment_inertia
      - area
      - natural_freq
      - crossflow_velocity
      - vortex_freq
      - freq_ratio
      - separation
      - stability_param
      - critical_velocity
      - safety_margin
      - bundle_width
      - acoustic_freq
      - recommended_span
    tags:
      - vibration
      - ache
      - api661
      - tube-bundle
      - analysis
    model_hint: "claude-sonnet-4"
    temperature: 0.2
    max_tokens: 3000

  - id: "vibration.fan_system_analyzer"
    name: "Fan System Vibration Analyzer"
    description: "Analyze fan system vibration per API 661 and AMCA 204"
    type: "chain_of_thought"
    category: "engineering"
    content: |
      Analyze fan system vibration:
      
      **Fan Data:**
      ${fan_data}
      
      **Analysis Process:**
      
      **1. Fan Balance Grade (AMCA 204)**
      - Balance grade: ${balance_grade} (BV-3, BV-7, BV-11)
        - BV-3: Commercial (0.2 in/s velocity)
        - BV-7: Industrial (0.1 in/s velocity)
        - BV-11: Precision (0.05 in/s velocity)
      - Operating speed: ${fan_speed} RPM
      - Fan diameter: ${fan_dia}"
      - Tip speed: v = π × D × N / 60 = ${tip_speed} ft/s
      
      **2. Critical Speed Check**
      - First critical speed: Nc = ${critical_speed} RPM
      - Operating speed: ${fan_speed} RPM
      - Speed ratio: N / Nc = ${speed_ratio}
      - Avoid: 0.8 < N/Nc < 1.2 (20% margin required)
      - Check: |${fan_speed} - ${critical_speed}| / ${critical_speed} = ${margin}%
      
      **3. Vibration Limits (API 661)**
      - Maximum displacement: 0.2" peak-to-peak (API 661 requirement)
      - Vibration switch setting: 0.5" p-p (typical shutdown)
      - Measured displacement: ${measured_displacement}" p-p
      - Status: ${measured_displacement} ≤ 0.2" = ${vibration_ok}
      
      **4. Foundation Natural Frequency**
      - Foundation frequency: ${foundation_freq} Hz
      - Operating frequency: f_operating = ${fan_speed} / 60 = ${operating_freq} Hz
      - Frequency ratio: f_foundation / f_operating = ${foundation_ratio}
      - Required: f_foundation > 2 × f_operating (avoid resonance)
      - Check: ${foundation_freq} > 2 × ${operating_freq} = ${foundation_ok}
      
      **5. Motor & Drive Vibration**
      - Motor mounting: ${motor_mounting} (rigid, flexible)
      - Belt tension: ${belt_tension} (adequate, loose, tight)
      - Shaft alignment: ${shaft_alignment} (aligned, misaligned)
      - Bearing condition: ${bearing_condition} (good, worn)
      
      **6. Vibration Switch Placement**
      - Location: ${switch_location} (1' from fan centerline, 6" from top per HPC)
      - Switch type: ${switch_type} (displacement, velocity, acceleration)
      - Setting: ${switch_setting}" p-p
      
      **Output JSON:**
      {
        "analysis_status": "pass|fail|warning",
        "balance_grade": {
          "grade": "string",
          "velocity_limit_in_s": number,
          "status": "pass|fail"
        },
        "critical_speed": {
          "critical_speed_rpm": number,
          "operating_speed_rpm": number,
          "speed_ratio": number,
          "margin_adequate": true|false,
          "status": "pass|fail"
        },
        "vibration_limits": {
          "measured_displacement_in_pp": number,
          "api_661_limit_in_pp": 0.2,
          "switch_setting_in_pp": number,
          "status": "pass|fail"
        },
        "foundation": {
          "foundation_freq_hz": number,
          "operating_freq_hz": number,
          "frequency_ratio": number,
          "resonance_risk": "low|moderate|high",
          "status": "pass|fail"
        },
        "motor_drive": {
          "mounting_ok": true|false,
          "belt_tension_ok": true|false,
          "alignment_ok": true|false,
          "bearing_condition": "string",
          "status": "pass|fail"
        },
        "vibration_switch": {
          "location_ok": true|false,
          "setting_adequate": true|false,
          "status": "pass|fail"
        },
        "references": ["API 661", "AMCA 204", "HPC Standards"],
        "recommendations": ["string"]
      }
    variables:
      - fan_data
      - balance_grade
      - fan_speed
      - fan_dia
      - tip_speed
      - critical_speed
      - speed_ratio
      - margin
      - measured_displacement
      - vibration_ok
      - foundation_freq
      - operating_freq
      - foundation_ratio
      - foundation_ok
      - motor_mounting
      - belt_tension
      - shaft_alignment
      - bearing_condition
      - switch_location
      - switch_type
      - switch_setting
    tags:
      - vibration
      - fan
      - api661
      - amca
      - analysis
    model_hint: "claude-sonnet-4"
    temperature: 0.2
    max_tokens: 2500

  # ========================================================================
  # SHEET METAL ADVANCED PROMPTS
  # ========================================================================
  
  - id: "sheet_metal.advanced_bend_calculator"
    name: "Advanced Sheet Metal Bend Calculator"
    description: "Calculate bend allowance, K-factor, springback, and grain direction effects"
    type: "chain_of_thought"
    category: "engineering"
    content: |
      Calculate advanced sheet metal bend parameters:
      
      **Bend Data:**
      ${bend_data}
      
      **Calculation Process:**
      
      **1. Material Properties**
      - Material: ${material} (mild_steel, aluminum_5052, stainless_304, etc.)
      - Thickness: ${thickness}"
      - Yield strength: ${yield_strength} ksi
      - Bend method: ${bend_method} (air_bend, bottom_bend, coining)
      
      **2. K-Factor Selection**
      - Air bend: K = 0.33 (most common)
      - Bottom bend: K = 0.42
      - Coining: K = 0.50 (neutral axis at center)
      - Material-specific:
        - Soft materials (Al, Cu): K = 0.35
        - Hard materials (SS, spring steel): K = 0.45
      - Selected K-factor: ${k_factor}
      
      **3. Minimum Bend Radius**
      - Material factor: ${material_factor} × thickness
        - Mild steel: 1.0 × t
        - Aluminum 5052: 1.0 × t
        - Aluminum 6061: 1.5 × t
        - Stainless 304: 1.5 × t
        - Spring steel: 3.0 × t
      - Minimum radius: R_min = ${material_factor} × ${thickness} = ${min_radius}"
      - Actual radius: ${actual_radius}"
      - Check: ${actual_radius} ≥ ${min_radius} = ${radius_ok}
      
      **4. Bend Allowance Calculation**
      - Inside radius: R = ${inside_radius}"
      - Bend angle: A = ${bend_angle}°
      - K-factor: K = ${k_factor}
      - Thickness: T = ${thickness}"
      
      **Formula:**
      - BA = π × (R + K × T) × (A / 180)
      - BA = π × (${inside_radius} + ${k_factor} × ${thickness}) × (${bend_angle} / 180)
      - BA = ${bend_allowance}"
      
      **5. Bend Deduction (Setback)**
      - Outside setback: OSSB = (R + T) × tan(A/2)
      - OSSB = (${inside_radius} + ${thickness}) × tan(${bend_angle}/2)
      - OSSB = ${outside_setback}"
      - Bend deduction: BD = 2 × OSSB - BA
      - BD = 2 × ${outside_setback} - ${bend_allowance} = ${bend_deduction}"
      
      **6. Flat Pattern Development**
      - Leg 1: ${leg1}"
      - Leg 2: ${leg2}"
      - Flat length: L = Leg1 + Leg2 - BD
      - L = ${leg1} + ${leg2} - ${bend_deduction} = ${flat_length}"
      
      **7. Springback Compensation**
      - Material springback: ${springback_angle}° (typical)
        - Mild steel: 2°
        - Aluminum: 3°
        - Stainless: 4°
        - Spring steel: 8°
      - Required overbend: ${bend_angle} + ${springback_angle} = ${overbend_angle}°
      - Die angle adjustment: ${die_adjustment}°
      
      **8. Grain Direction Effects**
      - Grain direction: ${grain_direction} (parallel, perpendicular, diagonal)
      - Bending parallel to grain: Risk of cracking (use caution)
      - Bending perpendicular to grain: Preferred (best results)
      - Bending 45° to grain: Good compromise
      - Recommendation: ${grain_recommendation}
      
      **9. Bend Quality Checks**
      - Minimum flange length: L_min = 4 × T = 4 × ${thickness} = ${min_flange}"
      - Actual flange: ${actual_flange}"
      - Check: ${actual_flange} ≥ ${min_flange} = ${flange_ok}
      - Hole-to-bend distance: D_min = 2.5 × T + R = ${min_hole_distance}"
      - Actual distance: ${hole_distance}"
      - Check: ${hole_distance} ≥ ${min_hole_distance} = ${hole_distance_ok}
      
      **Output JSON:**
      {
        "calculation_status": "pass|fail|warning",
        "k_factor": {
          "selected": number,
          "method": "string",
          "rationale": "string"
        },
        "minimum_bend_radius": {
          "calculated_in": number,
          "actual_in": number,
          "adequate": true|false,
          "status": "pass|fail"
        },
        "bend_allowance": {
          "ba_in": number,
          "formula": "π × (R + K×T) × (A/180)",
          "status": "pass|fail"
        },
        "bend_deduction": {
          "bd_in": number,
          "outside_setback_in": number,
          "status": "pass|fail"
        },
        "flat_pattern": {
          "flat_length_in": number,
          "leg1_in": number,
          "leg2_in": number,
          "status": "pass|fail"
        },
        "springback": {
          "springback_angle_deg": number,
          "overbend_angle_deg": number,
          "die_adjustment_deg": number,
          "status": "pass|fail"
        },
        "grain_direction": {
          "direction": "string",
          "risk_level": "low|moderate|high",
          "recommendation": "string",
          "status": "pass|fail|warning"
        },
        "quality_checks": {
          "flange_length_ok": true|false,
          "hole_distance_ok": true|false,
          "status": "pass|fail"
        },
        "references": ["ASME Y14.5", "Sheet Metal Handbook"],
        "recommendations": ["string"]
      }
    variables:
      - bend_data
      - material
      - thickness
      - yield_strength
      - bend_method
      - k_factor
      - material_factor
      - min_radius
      - actual_radius
      - radius_ok
      - inside_radius
      - bend_angle
      - bend_allowance
      - outside_setback
      - bend_deduction
      - leg1
      - leg2
      - flat_length
      - springback_angle
      - overbend_angle
      - die_adjustment
      - grain_direction
      - grain_recommendation
      - min_flange
      - actual_flange
      - flange_ok
      - min_hole_distance
      - hole_distance
      - hole_distance_ok
    tags:
      - sheet-metal
      - bending
      - k-factor
      - springback
      - grain-direction
    model_hint: "claude-sonnet-4"
    temperature: 0.2
    max_tokens: 3000

  # ========================================================================
  # RIGGING & LIFTING PROMPTS
  # ========================================================================
  
  - id: "rigging.lifting_lug_designer"
    name: "Lifting Lug Designer"
    description: "Design lifting lugs per ASME BTH-1"
    type: "chain_of_thought"
    category: "engineering"
    content: |
      Design a lifting lug per ASME BTH-1:
      
      **Lifting Requirements:**
      ${lifting_data}
      
      **Design Process:**
      
      **1. Load Classification (ASME BTH-1)**
      - Load class: ${load_class} (A, B, C, D)
        - Class A: Design factor 3.0 (normal service)
        - Class B: Design factor 4.0 (heavy service)
        - Class C: Design factor 5.0 (severe service)
        - Class D: Design factor 6.0 (critical service)
      - Design factor: DF = ${design_factor}
      - Rated load: ${rated_load} lbs
      - Design load: P_design = DF × ${rated_load} = ${design_load} lbs
      
      **2. Sling Angle Effects**
      - Sling angle: ${sling_angle}° (from horizontal)
      - Vertical load: P_vertical = P / sin(θ)
      - P_vertical = ${rated_load} / sin(${sling_angle}°) = ${vertical_load} lbs
      - Horizontal load: P_horizontal = P × cot(θ)
      - P_horizontal = ${rated_load} × cot(${sling_angle}°) = ${horizontal_load} lbs
      - Capacity reduction factor: ${capacity_factor} (from angle)
      
      **3. Lug Geometry**
      - Plate thickness: t = ${plate_thickness}"
      - Plate width: W = ${plate_width}"
      - Hole diameter: D = ${hole_dia}"
      - Edge distance: e = ${edge_distance}" (from hole center to edge)
      - Minimum edge distance: e_min = 1.5 × D = 1.5 × ${hole_dia} = ${min_edge_dist}"
      - Check: ${edge_distance} ≥ ${min_edge_dist} = ${edge_ok}
      
      **4. Material Properties**
      - Material: ${material} (A36, A572-50, A514)
      - Yield strength: Fy = ${fy} ksi
      - Ultimate strength: Fu = ${fu} ksi
      
      **5. Stress Checks**
      
      **Tensile Stress (Net Section):**
      - Net area: An = (W - D) × t
      - An = (${plate_width} - ${hole_dia}) × ${plate_thickness} = ${net_area} in²
      - Tensile stress: σt = P_design / An
      - σt = ${design_load} / ${net_area} = ${tensile_stress} ksi
      - Allowable: σt_allow = 0.6 × Fy = 0.6 × ${fy} = ${tensile_allowable} ksi
      - Check: ${tensile_stress} ≤ ${tensile_allowable} = ${tensile_ok}
      
      **Bearing Stress (Hole):**
      - Bearing area: Ab = D × t
      - Ab = ${hole_dia} × ${plate_thickness} = ${bearing_area} in²
      - Bearing stress: σb = P_design / Ab
      - σb = ${design_load} / ${bearing_area} = ${bearing_stress} ksi
      - Allowable: σb_allow = 1.5 × Fu = 1.5 × ${fu} = ${bearing_allowable} ksi
      - Check: ${bearing_stress} ≤ ${bearing_allowable} = ${bearing_ok}
      
      **Shear Stress (Tearout):**
      - Shear area: Av = 2 × e × t (two shear planes)
      - Av = 2 × ${edge_distance} × ${plate_thickness} = ${shear_area} in²
      - Shear stress: τ = P_design / Av
      - τ = ${design_load} / ${shear_area} = ${shear_stress} ksi
      - Allowable: τ_allow = 0.4 × Fy = 0.4 × ${fy} = ${shear_allowable} ksi
      - Check: ${shear_stress} ≤ ${shear_allowable} = ${shear_ok}
      
      **6. Weld Design (if welded)**
      - Weld size: ${weld_size}" (leg size)
      - Weld length: ${weld_length}"
      - Weld capacity: Rn = 0.6 × FEXX × 0.707 × weld_size × length
      - Rn = 0.6 × 70 × 0.707 × ${weld_size} × ${weld_length} = ${weld_capacity} lbs
      - Check: ${weld_capacity} ≥ ${design_load} = ${weld_ok}
      
      **7. Shackle Selection**
      - Required WLL: ${rated_load} lbs = ${wll_tons} tons
      - Select shackle: ${shackle_size}" (${shackle_wll} tons WLL)
      - Safety factor: ${shackle_wll} / ${wll_tons} = ${shackle_sf}
      - Required: ≥ 3:1
      
      **Output JSON:**
      {
        "design_status": "pass|fail|warning",
        "load_classification": {
          "load_class": "string",
          "design_factor": number,
          "rated_load_lbs": number,
          "design_load_lbs": number
        },
        "sling_angle": {
          "angle_deg": number,
          "vertical_load_lbs": number,
          "horizontal_load_lbs": number,
          "capacity_factor": number
        },
        "lug_geometry": {
          "plate_thickness_in": number,
          "plate_width_in": number,
          "hole_diameter_in": number,
          "edge_distance_in": number,
          "min_edge_distance_in": number,
          "edge_adequate": true|false,
          "status": "pass|fail"
        },
        "stress_checks": {
          "tensile": {
            "stress_ksi": number,
            "allowable_ksi": number,
            "dcr": number,
            "status": "pass|fail"
          },
          "bearing": {
            "stress_ksi": number,
            "allowable_ksi": number,
            "dcr": number,
            "status": "pass|fail"
          },
          "shear": {
            "stress_ksi": number,
            "allowable_ksi": number,
            "dcr": number,
            "status": "pass|fail"
          }
        },
        "weld_design": {
          "weld_size_in": number,
          "weld_length_in": number,
          "weld_capacity_lbs": number,
          "required_load_lbs": number,
          "status": "pass|fail"
        },
        "shackle_selection": {
          "shackle_size": "string",
          "wll_tons": number,
          "safety_factor": number,
          "adequate": true|false,
          "status": "pass|fail"
        },
        "asme_references": ["BTH-1"],
        "recommendations": ["string"]
      }
    variables:
      - lifting_data
      - load_class
      - design_factor
      - rated_load
      - design_load
      - sling_angle
      - vertical_load
      - horizontal_load
      - capacity_factor
      - plate_thickness
      - plate_width
      - hole_dia
      - edge_distance
      - min_edge_dist
      - edge_ok
      - material
      - fy
      - fu
      - net_area
      - tensile_stress
      - tensile_allowable
      - tensile_ok
      - bearing_area
      - bearing_stress
      - bearing_allowable
      - bearing_ok
      - shear_area
      - shear_stress
      - shear_allowable
      - shear_ok
      - weld_size
      - weld_length
      - weld_capacity
      - weld_ok
      - wll_tons
      - shackle_size
      - shackle_wll
      - shackle_sf
    tags:
      - rigging
      - lifting
      - asme-bth-1
      - design
    model_hint: "claude-sonnet-4"
    temperature: 0.2
    max_tokens: 3000

  - id: "rigging.sling_arrangement_calculator"
    name: "Sling Arrangement Calculator"
    description: "Calculate sling loads and arrangements for multi-point lifts"
    type: "chain_of_thought"
    category: "engineering"
    content: |
      Calculate sling arrangement for this lift:
      
      **Lift Data:**
      ${lift_data}
      
      **Calculation Process:**
      
      **1. Load Distribution**
      - Total weight: ${total_weight} lbs
      - Number of lift points: ${lift_points}
      - Load per point (vertical): P_vert = ${total_weight} / ${lift_points} = ${load_per_point} lbs
      
      **2. Sling Configuration**
      - Configuration: ${sling_config} (vertical, basket, choker, bridle)
      - Number of slings: ${sling_count}
      - Sling angle: ${sling_angle}° (from horizontal for bridle)
      
      **3. Sling Load Calculation**
      
      **Vertical Sling:**
      - Load = P_vert = ${load_per_point} lbs
      
      **Basket Sling (90°):**
      - Load = P_vert / 2 = ${load_per_point} / 2 = ${basket_load} lbs
      - Capacity factor: 2.0 (doubles capacity)
      
      **Choker Sling:**
      - Load = P_vert / 0.8 = ${load_per_point} / 0.8 = ${choker_load} lbs
      - Capacity reduction: 80% (20% reduction)
      
      **Bridle Sling (Angled):**
      - Load = P_vert / (n × sin(θ))
        - n = number of slings per point
        - θ = sling angle from horizontal
      - Load = ${load_per_point} / (${sling_count} × sin(${sling_angle}°)) = ${bridle_load} lbs
      - Horizontal force: H = P_vert × cot(θ) = ${horizontal_force} lbs
      
      **4. Sling Selection**
      - Required WLL: ${required_wll} lbs = ${wll_tons} tons
      - Sling type: ${sling_type} (wire_rope, chain, synthetic)
      - Sling diameter: ${sling_dia}"
      - WLL capacity: ${sling_wll} tons
      - Safety factor: ${sling_wll} / ${wll_tons} = ${sling_sf}
      - Required: ≥ 5:1 for personnel, ≥ 3:1 for equipment
      
      **5. Center of Gravity Check**
      - CG location: X = ${cg_x}", Y = ${cg_y}", Z = ${cg_z}"
      - Lift point locations: ${lift_points_data}
      - Verify CG is within lift point polygon
      - Check for tipping risk
      
      **6. Load Angle Effects**
      - Maximum sling angle: ${max_angle}°
      - Minimum sling angle: ${min_angle}° (typically ≥ 30°)
      - Angle factor: ${angle_factor} (from angle)
      - Adjusted load: ${adjusted_load} lbs
      
      **Output JSON:**
      {
        "calculation_status": "pass|fail|warning",
        "load_distribution": {
          "total_weight_lbs": number,
          "lift_points": number,
          "load_per_point_lbs": number
        },
        "sling_configuration": {
          "config": "string",
          "sling_count": number,
          "sling_angle_deg": number
        },
        "sling_loads": {
          "vertical_load_lbs": number,
          "basket_load_lbs": number,
          "choker_load_lbs": number,
          "bridle_load_lbs": number,
          "horizontal_force_lbs": number
        },
        "sling_selection": {
          "required_wll_tons": number,
          "sling_type": "string",
          "sling_diameter_in": number,
          "sling_wll_tons": number,
          "safety_factor": number,
          "adequate": true|false,
          "status": "pass|fail"
        },
        "center_of_gravity": {
          "cg_location": {"x": number, "y": number, "z": number},
          "within_lift_polygon": true|false,
          "tipping_risk": "low|moderate|high",
          "status": "pass|fail"
        },
        "load_angles": {
          "max_angle_deg": number,
          "min_angle_deg": number,
          "angle_factor": number,
          "adjusted_load_lbs": number,
          "status": "pass|fail"
        },
        "references": ["ASME B30.9", "OSHA 1926.251"],
        "recommendations": ["string"]
      }
    variables:
      - lift_data
      - total_weight
      - lift_points
      - load_per_point
      - sling_config
      - sling_count
      - sling_angle
      - basket_load
      - choker_load
      - bridle_load
      - horizontal_force
      - required_wll
      - wll_tons
      - sling_type
      - sling_dia
      - sling_wll
      - sling_sf
      - cg_x
      - cg_y
      - cg_z
      - lift_points_data
      - max_angle
      - min_angle
      - angle_factor
      - adjusted_load
    tags:
      - rigging
      - sling
      - lifting
      - calculation
    model_hint: "claude-sonnet-4"
    temperature: 0.2
    max_tokens: 3000

