  # ========================================================================
  # CROSS-PART VALIDATION PROMPTS
  # ========================================================================
  
  - id: "interface.cross_part_validator"
    name: "Cross-Part Interface Validator"
    description: "Validate interface compatibility between mating parts"
    type: "chain_of_thought"
    category: "validation"
    content: |
      Validate interface compatibility between mating parts:
      
      **Interface Data:**
      ${interface_data}
      
      **Part A Interface:**
      - Part ID: ${part_a_id}
      - Interface type: ${interface_type_a} (bolted, welded, slip_fit, press_fit, mating_surface, keyway)
      - Hole pattern: ${hole_pattern_a}
      
      **Part B Interface (Mating):**
      - Part ID: ${part_b_id}
      - Interface type: ${interface_type_b}
      - Hole pattern: ${hole_pattern_b}
      
      **Validation Process:**
      
      **1. Interface Type Compatibility**
      - Verify interface types are compatible
      - Bolted interfaces require matching hole patterns
      - Slip/press fits require shaft/bore compatibility
      - Keyways require matching key sizes
      
      **2. Hole Pattern Alignment (for Bolted Connections)**
      - Bolt circle diameter: Part A = ${bcd_a}", Part B = ${bcd_b}"
      - Tolerance: ±${tolerance}" (typically ±1/16")
      - Number of holes: Part A = ${hole_count_a}, Part B = ${hole_count_b}
      - Angular spacing: 360° / ${hole_count_a} = ${angular_spacing}° (must match)
      - Center-to-center alignment: Check each hole pair
        - dx = |x_a - x_b| ≤ ${tolerance}
        - dy = |y_a - y_b| ≤ ${tolerance}
      
      **3. Hole Size Compatibility**
      - Part A hole diameter: ${hole_dia_a}"
      - Part B hole diameter: ${hole_dia_b}"
      - Size difference: |${hole_dia_a} - ${hole_dia_b}| ≤ 0.0625" (1/16")
      - Standard clearance: Hole = Bolt + 1/16" (standard hole per AISC J3.2)
      
      **4. Shaft/Bore Fit (for Slip/Press Fits)**
      - Shaft diameter: ${shaft_dia}"
      - Bore diameter: ${bore_dia}"
      - Fit class: ${fit_class} (RC1-RC9 for clearance, FN1-FN5 for interference)
      - Clearance/interference: ${bore_dia} - ${shaft_dia} = ${fit_value}"
      - Verify fit class requirements per ANSI B4.1
      
      **5. Keyway Alignment (if applicable)**
      - Keyway width: Part A = ${keyway_width_a}", Part B = ${keyway_width_b}"
      - Keyway depth: Part A = ${keyway_depth_a}", Part B = ${keyway_depth_b}"
      - Key size: ${key_width}" × ${key_height}" (per ANSI B17.1)
      - Verify key fits both keyways
      
      **6. Mating Surface Compatibility**
      - Surface flatness: Part A = ${flatness_a}", Part B = ${flatness_b}"
      - Surface finish: Part A = ${finish_a} Ra, Part B = ${finish_b} Ra
      - Gasket compatibility: ${gasket_type} (if applicable)
      - Flange face type: ${flange_face_a} vs ${flange_face_b} (must match)
      
      **7. Assembly Sequence**
      - Can parts be assembled? ${assembly_feasible}
      - Clearance for tools: ${tool_clearance_ok}
      - Access for fasteners: ${fastener_access_ok}
      
      **Output JSON:**
      {
        "validation_status": "pass|fail|warning",
        "interface_compatibility": {
          "types_compatible": true|false,
          "status": "pass|fail"
        },
        "hole_alignment": {
          "bcd_match": true|false,
          "hole_count_match": true|false,
          "angular_spacing_match": true|false,
          "center_alignment_ok": true|false,
          "misaligned_holes": [
            {
              "hole_number": number,
              "dx_in": number,
              "dy_in": number,
              "status": "pass|fail"
            }
          ],
          "status": "pass|fail"
        },
        "hole_size_compatibility": {
          "size_difference_in": number,
          "compatible": true|false,
          "status": "pass|fail"
        },
        "fit_analysis": {
          "fit_class": "string",
          "clearance_interference_in": number,
          "meets_standard": true|false,
          "status": "pass|fail"
        },
        "keyway_alignment": {
          "width_match": true|false,
          "depth_match": true|false,
          "key_fits": true|false,
          "status": "pass|fail"
        },
        "mating_surface": {
          "flatness_ok": true|false,
          "finish_compatible": true|false,
          "gasket_compatible": true|false,
          "status": "pass|fail"
        },
        "assembly_feasibility": {
          "can_assemble": true|false,
          "tool_clearance_ok": true|false,
          "fastener_access_ok": true|false,
          "status": "pass|fail"
        },
        "issues": [
          {
            "check": "string",
            "part_a": "string",
            "part_b": "string",
            "requirement": "string",
            "actual": "string",
            "status": "pass|fail|warning"
          }
        ],
        "references": ["ANSI B4.1", "AISC J3", "ANSI B17.1"],
        "recommendations": ["string"]
      }
    variables:
      - interface_data
      - part_a_id
      - interface_type_a
      - hole_pattern_a
      - part_b_id
      - interface_type_b
      - hole_pattern_b
      - bcd_a
      - bcd_b
      - tolerance
      - hole_count_a
      - hole_count_b
      - angular_spacing
      - hole_dia_a
      - hole_dia_b
      - shaft_dia
      - bore_dia
      - fit_class
      - fit_value
      - keyway_width_a
      - keyway_width_b
      - keyway_depth_a
      - keyway_depth_b
      - key_width
      - key_height
      - flatness_a
      - flatness_b
      - finish_a
      - finish_b
      - gasket_type
      - flange_face_a
      - flange_face_b
      - assembly_feasible
      - tool_clearance_ok
      - fastener_access_ok
    tags:
      - cross-part
      - interface
      - alignment
      - fit
      - validation
    model_hint: "claude-sonnet-4"
    temperature: 0.2
    max_tokens: 3000

  # ========================================================================
  # VIBRATION ANALYSIS PROMPTS
  # ========================================================================
  
  - id: "vibration.tube_bundle_analyzer"
    name: "Tube Bundle Vibration Analyzer"
    description: "Analyze tube bundle vibration per API 661"
    type: "chain_of_thought"
    category: "engineering"
    content: |
      Analyze tube bundle vibration for this ACHE design:
      
      **Vibration Data:**
      ${vibration_data}
      
      **Analysis Process:**
      
      **1. Natural Frequency Calculation**
      - Tube OD: ${tube_od}" 
      - Tube wall: ${tube_wall}"
      - Tube ID: ${tube_id}" = ${tube_od} - 2 × ${tube_wall}
      - Unsupported span: ${span}" (between supports)
      - Material: ${material} (E = ${modulus} psi, ρ = ${density} lb/ft³)
      
      **Moment of Inertia:**
      - I = π × (OD⁴ - ID⁴) / 64
      - I = π × (${tube_od}⁴ - ${tube_id}⁴) / 64 = ${moment_inertia} in⁴
      
      **Area:**
      - A = π × (OD² - ID²) / 4
      - A = π × (${tube_od}² - ${tube_id}²) / 4 = ${area} in²
      
      **Natural Frequency (Pinned-Pinned):**
      - fn = (π / (2L²)) × √(EI / (ρA)) × (1 / (2π))
      - fn = (π / (2 × ${span}²)) × √(${modulus} × ${moment_inertia} / (${density} × ${area})) × (1 / (2π))
      - fn = ${natural_freq} Hz
      
      **2. Vortex Shedding Frequency**
      - Crossflow velocity: ${crossflow_velocity} ft/s
      - Strouhal number: St = 0.2 (for cylinders)
      - Vortex frequency: fv = St × V / D
      - fv = 0.2 × ${crossflow_velocity} / (${tube_od} / 12) = ${vortex_freq} Hz
      
      **3. Resonance Check**
      - Frequency ratio: fv / fn = ${vortex_freq} / ${natural_freq} = ${freq_ratio}
      - Avoid resonance: |fv - fn| / fn > 0.2 (20% separation)
      - Check: |${vortex_freq} - ${natural_freq}| / ${natural_freq} = ${separation}%
      
      **4. Fluid-Elastic Instability**
      - Critical velocity: Vc = fn × D / (St × K)
        - K = stability parameter (typically 3-5)
      - Vc = ${natural_freq} × (${tube_od} / 12) / (0.2 × ${stability_param}) = ${critical_velocity} ft/s
      - Operating velocity: ${crossflow_velocity} ft/s
      - Safety margin: Vc / V_operating = ${safety_margin}
      - Required: ≥ 1.5 (50% margin)
      
      **5. Acoustic Resonance**
      - Acoustic frequency: fa = c / (2 × L)
        - c = speed of sound in air ≈ 1100 ft/s
        - L = characteristic length (bundle width)
      - fa = 1100 / (2 × ${bundle_width}) = ${acoustic_freq} Hz
      - Avoid: fa near fn or fv
      
      **6. Support Spacing Optimization**
      - Current span: ${span}"
      - Recommended: fn > 10 Hz (avoid low-frequency issues)
      - If fn < 10 Hz: Reduce span or add supports
      - New span for fn = 10 Hz: L_new = ${recommended_span}"
      
      **Output JSON:**
      {
        "analysis_status": "pass|fail|warning",
        "natural_frequency": {
          "fn_hz": number,
          "span_in": number,
          "status": "pass|fail",
          "recommendation": "string"
        },
        "vortex_shedding": {
          "fv_hz": number,
          "crossflow_velocity_fps": number,
          "strouhal_number": 0.2,
          "status": "pass|fail"
        },
        "resonance_check": {
          "frequency_ratio": number,
          "separation_percent": number,
          "resonance_risk": "low|moderate|high",
          "status": "pass|fail"
        },
        "fluid_elastic_instability": {
          "critical_velocity_fps": number,
          "operating_velocity_fps": number,
          "safety_margin": number,
          "margin_adequate": true|false,
          "status": "pass|fail"
        },
        "acoustic_resonance": {
          "acoustic_freq_hz": number,
          "near_natural_freq": true|false,
          "near_vortex_freq": true|false,
          "status": "pass|fail"
        },
        "support_recommendations": {
          "current_span_in": number,
          "recommended_span_in": number,
          "supports_needed": number,
          "status": "pass|fail"
        },
        "api_661_references": ["Section 6.3"],
        "warnings": ["string"],
        "recommendations": ["string"]
      }
    variables:
      - vibration_data
      - tube_od
      - tube_wall
      - tube_id
      - span
      - material
      - modulus
      - density
      - moment_inertia
      - area
      - natural_freq
      - crossflow_velocity
      - vortex_freq
      - freq_ratio
      - separation
      - stability_param
      - critical_velocity
      - safety_margin
      - bundle_width
      - acoustic_freq
      - recommended_span
    tags:
      - vibration
      - ache
      - api661
      - tube-bundle
      - analysis
    model_hint: "claude-sonnet-4"
    temperature: 0.2
    max_tokens: 3000

  - id: "vibration.fan_system_analyzer"
    name: "Fan System Vibration Analyzer"
    description: "Analyze fan system vibration per API 661 and AMCA 204"
    type: "chain_of_thought"
    category: "engineering"
    content: |
      Analyze fan system vibration:
      
      **Fan Data:**
      ${fan_data}
      
      **Analysis Process:**
      
      **1. Fan Balance Grade (AMCA 204)**
      - Balance grade: ${balance_grade} (BV-3, BV-7, BV-11)
        - BV-3: Commercial (0.2 in/s velocity)
        - BV-7: Industrial (0.1 in/s velocity)
        - BV-11: Precision (0.05 in/s velocity)
      - Operating speed: ${fan_speed} RPM
      - Fan diameter: ${fan_dia}"
      - Tip speed: v = π × D × N / 60 = ${tip_speed} ft/s
      
      **2. Critical Speed Check**
      - First critical speed: Nc = ${critical_speed} RPM
      - Operating speed: ${fan_speed} RPM
      - Speed ratio: N / Nc = ${speed_ratio}
      - Avoid: 0.8 < N/Nc < 1.2 (20% margin required)
      - Check: |${fan_speed} - ${critical_speed}| / ${critical_speed} = ${margin}%
      
      **3. Vibration Limits (API 661)**
      - Maximum displacement: 0.2" peak-to-peak (API 661 requirement)
      - Vibration switch setting: 0.5" p-p (typical shutdown)
      - Measured displacement: ${measured_displacement}" p-p
      - Status: ${measured_displacement} ≤ 0.2" = ${vibration_ok}
      
      **4. Foundation Natural Frequency**
      - Foundation frequency: ${foundation_freq} Hz
      - Operating frequency: f_operating = ${fan_speed} / 60 = ${operating_freq} Hz
      - Frequency ratio: f_foundation / f_operating = ${foundation_ratio}
      - Required: f_foundation > 2 × f_operating (avoid resonance)
      - Check: ${foundation_freq} > 2 × ${operating_freq} = ${foundation_ok}
      
      **5. Motor & Drive Vibration**
      - Motor mounting: ${motor_mounting} (rigid, flexible)
      - Belt tension: ${belt_tension} (adequate, loose, tight)
      - Shaft alignment: ${shaft_alignment} (aligned, misaligned)
      - Bearing condition: ${bearing_condition} (good, worn)
      
      **6. Vibration Switch Placement**
      - Location: ${switch_location} (1' from fan centerline, 6" from top per HPC)
      - Switch type: ${switch_type} (displacement, velocity, acceleration)
      - Setting: ${switch_setting}" p-p
      
      **Output JSON:**
      {
        "analysis_status": "pass|fail|warning",
        "balance_grade": {
          "grade": "string",
          "velocity_limit_in_s": number,
          "status": "pass|fail"
        },
        "critical_speed": {
          "critical_speed_rpm": number,
          "operating_speed_rpm": number,
          "speed_ratio": number,
          "margin_adequate": true|false,
          "status": "pass|fail"
        },
        "vibration_limits": {
          "measured_displacement_in_pp": number,
          "api_661_limit_in_pp": 0.2,
          "switch_setting_in_pp": number,
          "status": "pass|fail"
        },
        "foundation": {
          "foundation_freq_hz": number,
          "operating_freq_hz": number,
          "frequency_ratio": number,
          "resonance_risk": "low|moderate|high",
          "status": "pass|fail"
        },
        "motor_drive": {
          "mounting_ok": true|false,
          "belt_tension_ok": true|false,
          "alignment_ok": true|false,
          "bearing_condition": "string",
          "status": "pass|fail"
        },
        "vibration_switch": {
          "location_ok": true|false,
          "setting_adequate": true|false,
          "status": "pass|fail"
        },
        "references": ["API 661", "AMCA 204", "HPC Standards"],
        "recommendations": ["string"]
      }
    variables:
      - fan_data
      - balance_grade
      - fan_speed
      - fan_dia
      - tip_speed
      - critical_speed
      - speed_ratio
      - margin
      - measured_displacement
      - vibration_ok
      - foundation_freq
      - operating_freq
      - foundation_ratio
      - foundation_ok
      - motor_mounting
      - belt_tension
      - shaft_alignment
      - bearing_condition
      - switch_location
      - switch_type
      - switch_setting
    tags:
      - vibration
      - fan
      - api661
      - amca
      - analysis
    model_hint: "claude-sonnet-4"
    temperature: 0.2
    max_tokens: 2500

  # ========================================================================
  # SHEET METAL ADVANCED PROMPTS
  # ========================================================================
  
  - id: "sheet_metal.advanced_bend_calculator"
    name: "Advanced Sheet Metal Bend Calculator"
    description: "Calculate bend allowance, K-factor, springback, and grain direction effects"
    type: "chain_of_thought"
    category: "engineering"
    content: |
      Calculate advanced sheet metal bend parameters:
      
      **Bend Data:**
      ${bend_data}
      
      **Calculation Process:**
      
      **1. Material Properties**
      - Material: ${material} (mild_steel, aluminum_5052, stainless_304, etc.)
      - Thickness: ${thickness}"
      - Yield strength: ${yield_strength} ksi
      - Bend method: ${bend_method} (air_bend, bottom_bend, coining)
      
      **2. K-Factor Selection**
      - Air bend: K = 0.33 (most common)
      - Bottom bend: K = 0.42
      - Coining: K = 0.50 (neutral axis at center)
      - Material-specific:
        - Soft materials (Al, Cu): K = 0.35
        - Hard materials (SS, spring steel): K = 0.45
      - Selected K-factor: ${k_factor}
      
      **3. Minimum Bend Radius**
      - Material factor: ${material_factor} × thickness
        - Mild steel: 1.0 × t
        - Aluminum 5052: 1.0 × t
        - Aluminum 6061: 1.5 × t
        - Stainless 304: 1.5 × t
        - Spring steel: 3.0 × t
      - Minimum radius: R_min = ${material_factor} × ${thickness} = ${min_radius}"
      - Actual radius: ${actual_radius}"
      - Check: ${actual_radius} ≥ ${min_radius} = ${radius_ok}
      
      **4. Bend Allowance Calculation**
      - Inside radius: R = ${inside_radius}"
      - Bend angle: A = ${bend_angle}°
      - K-factor: K = ${k_factor}
      - Thickness: T = ${thickness}"
      
      **Formula:**
      - BA = π × (R + K × T) × (A / 180)
      - BA = π × (${inside_radius} + ${k_factor} × ${thickness}) × (${bend_angle} / 180)
      - BA = ${bend_allowance}"
      
      **5. Bend Deduction (Setback)**
      - Outside setback: OSSB = (R + T) × tan(A/2)
      - OSSB = (${inside_radius} + ${thickness}) × tan(${bend_angle}/2)
      - OSSB = ${outside_setback}"
      - Bend deduction: BD = 2 × OSSB - BA
      - BD = 2 × ${outside_setback} - ${bend_allowance} = ${bend_deduction}"
      
      **6. Flat Pattern Development**
      - Leg 1: ${leg1}"
      - Leg 2: ${leg2}"
      - Flat length: L = Leg1 + Leg2 - BD
      - L = ${leg1} + ${leg2} - ${bend_deduction} = ${flat_length}"
      
      **7. Springback Compensation**
      - Material springback: ${springback_angle}° (typical)
        - Mild steel: 2°
        - Aluminum: 3°
        - Stainless: 4°
        - Spring steel: 8°
      - Required overbend: ${bend_angle} + ${springback_angle} = ${overbend_angle}°
      - Die angle adjustment: ${die_adjustment}°
      
      **8. Grain Direction Effects**
      - Grain direction: ${grain_direction} (parallel, perpendicular, diagonal)
      - Bending parallel to grain: Risk of cracking (use caution)
      - Bending perpendicular to grain: Preferred (best results)
      - Bending 45° to grain: Good compromise
      - Recommendation: ${grain_recommendation}
      
      **9. Bend Quality Checks**
      - Minimum flange length: L_min = 4 × T = 4 × ${thickness} = ${min_flange}"
      - Actual flange: ${actual_flange}"
      - Check: ${actual_flange} ≥ ${min_flange} = ${flange_ok}
      - Hole-to-bend distance: D_min = 2.5 × T + R = ${min_hole_distance}"
      - Actual distance: ${hole_distance}"
      - Check: ${hole_distance} ≥ ${min_hole_distance} = ${hole_distance_ok}
      
      **Output JSON:**
      {
        "calculation_status": "pass|fail|warning",
        "k_factor": {
          "selected": number,
          "method": "string",
          "rationale": "string"
        },
        "minimum_bend_radius": {
          "calculated_in": number,
          "actual_in": number,
          "adequate": true|false,
          "status": "pass|fail"
        },
        "bend_allowance": {
          "ba_in": number,
          "formula": "π × (R + K×T) × (A/180)",
          "status": "pass|fail"
        },
        "bend_deduction": {
          "bd_in": number,
          "outside_setback_in": number,
          "status": "pass|fail"
        },
        "flat_pattern": {
          "flat_length_in": number,
          "leg1_in": number,
          "leg2_in": number,
          "status": "pass|fail"
        },
        "springback": {
          "springback_angle_deg": number,
          "overbend_angle_deg": number,
          "die_adjustment_deg": number,
          "status": "pass|fail"
        },
        "grain_direction": {
          "direction": "string",
          "risk_level": "low|moderate|high",
          "recommendation": "string",
          "status": "pass|fail|warning"
        },
        "quality_checks": {
          "flange_length_ok": true|false,
          "hole_distance_ok": true|false,
          "status": "pass|fail"
        },
        "references": ["ASME Y14.5", "Sheet Metal Handbook"],
        "recommendations": ["string"]
      }
    variables:
      - bend_data
      - material
      - thickness
      - yield_strength
      - bend_method
      - k_factor
      - material_factor
      - min_radius
      - actual_radius
      - radius_ok
      - inside_radius
      - bend_angle
      - bend_allowance
      - outside_setback
      - bend_deduction
      - leg1
      - leg2
      - flat_length
      - springback_angle
      - overbend_angle
      - die_adjustment
      - grain_direction
      - grain_recommendation
      - min_flange
      - actual_flange
      - flange_ok
      - min_hole_distance
      - hole_distance
      - hole_distance_ok
    tags:
      - sheet-metal
      - bending
      - k-factor
      - springback
      - grain-direction
    model_hint: "claude-sonnet-4"
    temperature: 0.2
    max_tokens: 3000

  # ========================================================================
  # RIGGING & LIFTING PROMPTS
  # ========================================================================
  
  - id: "rigging.lifting_lug_designer"
    name: "Lifting Lug Designer"
    description: "Design lifting lugs per ASME BTH-1"
    type: "chain_of_thought"
    category: "engineering"
    content: |
      Design a lifting lug per ASME BTH-1:
      
      **Lifting Requirements:**
      ${lifting_data}
      
      **Design Process:**
      
      **1. Load Classification (ASME BTH-1)**
      - Load class: ${load_class} (A, B, C, D)
        - Class A: Design factor 3.0 (normal service)
        - Class B: Design factor 4.0 (heavy service)
        - Class C: Design factor 5.0 (severe service)
        - Class D: Design factor 6.0 (critical service)
      - Design factor: DF = ${design_factor}
      - Rated load: ${rated_load} lbs
      - Design load: P_design = DF × ${rated_load} = ${design_load} lbs
      
      **2. Sling Angle Effects**
      - Sling angle: ${sling_angle}° (from horizontal)
      - Vertical load: P_vertical = P / sin(θ)
      - P_vertical = ${rated_load} / sin(${sling_angle}°) = ${vertical_load} lbs
      - Horizontal load: P_horizontal = P × cot(θ)
      - P_horizontal = ${rated_load} × cot(${sling_angle}°) = ${horizontal_load} lbs
      - Capacity reduction factor: ${capacity_factor} (from angle)
      
      **3. Lug Geometry**
      - Plate thickness: t = ${plate_thickness}"
      - Plate width: W = ${plate_width}"
      - Hole diameter: D = ${hole_dia}"
      - Edge distance: e = ${edge_distance}" (from hole center to edge)
      - Minimum edge distance: e_min = 1.5 × D = 1.5 × ${hole_dia} = ${min_edge_dist}"
      - Check: ${edge_distance} ≥ ${min_edge_dist} = ${edge_ok}
      
      **4. Material Properties**
      - Material: ${material} (A36, A572-50, A514)
      - Yield strength: Fy = ${fy} ksi
      - Ultimate strength: Fu = ${fu} ksi
      
      **5. Stress Checks**
      
      **Tensile Stress (Net Section):**
      - Net area: An = (W - D) × t
      - An = (${plate_width} - ${hole_dia}) × ${plate_thickness} = ${net_area} in²
      - Tensile stress: σt = P_design / An
      - σt = ${design_load} / ${net_area} = ${tensile_stress} ksi
      - Allowable: σt_allow = 0.6 × Fy = 0.6 × ${fy} = ${tensile_allowable} ksi
      - Check: ${tensile_stress} ≤ ${tensile_allowable} = ${tensile_ok}
      
      **Bearing Stress (Hole):**
      - Bearing area: Ab = D × t
      - Ab = ${hole_dia} × ${plate_thickness} = ${bearing_area} in²
      - Bearing stress: σb = P_design / Ab
      - σb = ${design_load} / ${bearing_area} = ${bearing_stress} ksi
      - Allowable: σb_allow = 1.5 × Fu = 1.5 × ${fu} = ${bearing_allowable} ksi
      - Check: ${bearing_stress} ≤ ${bearing_allowable} = ${bearing_ok}
      
      **Shear Stress (Tearout):**
      - Shear area: Av = 2 × e × t (two shear planes)
      - Av = 2 × ${edge_distance} × ${plate_thickness} = ${shear_area} in²
      - Shear stress: τ = P_design / Av
      - τ = ${design_load} / ${shear_area} = ${shear_stress} ksi
      - Allowable: τ_allow = 0.4 × Fy = 0.4 × ${fy} = ${shear_allowable} ksi
      - Check: ${shear_stress} ≤ ${shear_allowable} = ${shear_ok}
      
      **6. Weld Design (if welded)**
      - Weld size: ${weld_size}" (leg size)
      - Weld length: ${weld_length}"
      - Weld capacity: Rn = 0.6 × FEXX × 0.707 × weld_size × length
      - Rn = 0.6 × 70 × 0.707 × ${weld_size} × ${weld_length} = ${weld_capacity} lbs
      - Check: ${weld_capacity} ≥ ${design_load} = ${weld_ok}
      
      **7. Shackle Selection**
      - Required WLL: ${rated_load} lbs = ${wll_tons} tons
      - Select shackle: ${shackle_size}" (${shackle_wll} tons WLL)
      - Safety factor: ${shackle_wll} / ${wll_tons} = ${shackle_sf}
      - Required: ≥ 3:1
      
      **Output JSON:**
      {
        "design_status": "pass|fail|warning",
        "load_classification": {
          "load_class": "string",
          "design_factor": number,
          "rated_load_lbs": number,
          "design_load_lbs": number
        },
        "sling_angle": {
          "angle_deg": number,
          "vertical_load_lbs": number,
          "horizontal_load_lbs": number,
          "capacity_factor": number
        },
        "lug_geometry": {
          "plate_thickness_in": number,
          "plate_width_in": number,
          "hole_diameter_in": number,
          "edge_distance_in": number,
          "min_edge_distance_in": number,
          "edge_adequate": true|false,
          "status": "pass|fail"
        },
        "stress_checks": {
          "tensile": {
            "stress_ksi": number,
            "allowable_ksi": number,
            "dcr": number,
            "status": "pass|fail"
          },
          "bearing": {
            "stress_ksi": number,
            "allowable_ksi": number,
            "dcr": number,
            "status": "pass|fail"
          },
          "shear": {
            "stress_ksi": number,
            "allowable_ksi": number,
            "dcr": number,
            "status": "pass|fail"
          }
        },
        "weld_design": {
          "weld_size_in": number,
          "weld_length_in": number,
          "weld_capacity_lbs": number,
          "required_load_lbs": number,
          "status": "pass|fail"
        },
        "shackle_selection": {
          "shackle_size": "string",
          "wll_tons": number,
          "safety_factor": number,
          "adequate": true|false,
          "status": "pass|fail"
        },
        "asme_references": ["BTH-1"],
        "recommendations": ["string"]
      }
    variables:
      - lifting_data
      - load_class
      - design_factor
      - rated_load
      - design_load
      - sling_angle
      - vertical_load
      - horizontal_load
      - capacity_factor
      - plate_thickness
      - plate_width
      - hole_dia
      - edge_distance
      - min_edge_dist
      - edge_ok
      - material
      - fy
      - fu
      - net_area
      - tensile_stress
      - tensile_allowable
      - tensile_ok
      - bearing_area
      - bearing_stress
      - bearing_allowable
      - bearing_ok
      - shear_area
      - shear_stress
      - shear_allowable
      - shear_ok
      - weld_size
      - weld_length
      - weld_capacity
      - weld_ok
      - wll_tons
      - shackle_size
      - shackle_wll
      - shackle_sf
    tags:
      - rigging
      - lifting
      - asme-bth-1
      - design
    model_hint: "claude-sonnet-4"
    temperature: 0.2
    max_tokens: 3000

  - id: "rigging.sling_arrangement_calculator"
    name: "Sling Arrangement Calculator"
    description: "Calculate sling loads and arrangements for multi-point lifts"
    type: "chain_of_thought"
    category: "engineering"
    content: |
      Calculate sling arrangement for this lift:
      
      **Lift Data:**
      ${lift_data}
      
      **Calculation Process:**
      
      **1. Load Distribution**
      - Total weight: ${total_weight} lbs
      - Number of lift points: ${lift_points}
      - Load per point (vertical): P_vert = ${total_weight} / ${lift_points} = ${load_per_point} lbs
      
      **2. Sling Configuration**
      - Configuration: ${sling_config} (vertical, basket, choker, bridle)
      - Number of slings: ${sling_count}
      - Sling angle: ${sling_angle}° (from horizontal for bridle)
      
      **3. Sling Load Calculation**
      
      **Vertical Sling:**
      - Load = P_vert = ${load_per_point} lbs
      
      **Basket Sling (90°):**
      - Load = P_vert / 2 = ${load_per_point} / 2 = ${basket_load} lbs
      - Capacity factor: 2.0 (doubles capacity)
      
      **Choker Sling:**
      - Load = P_vert / 0.8 = ${load_per_point} / 0.8 = ${choker_load} lbs
      - Capacity reduction: 80% (20% reduction)
      
      **Bridle Sling (Angled):**
      - Load = P_vert / (n × sin(θ))
        - n = number of slings per point
        - θ = sling angle from horizontal
      - Load = ${load_per_point} / (${sling_count} × sin(${sling_angle}°)) = ${bridle_load} lbs
      - Horizontal force: H = P_vert × cot(θ) = ${horizontal_force} lbs
      
      **4. Sling Selection**
      - Required WLL: ${required_wll} lbs = ${wll_tons} tons
      - Sling type: ${sling_type} (wire_rope, chain, synthetic)
      - Sling diameter: ${sling_dia}"
      - WLL capacity: ${sling_wll} tons
      - Safety factor: ${sling_wll} / ${wll_tons} = ${sling_sf}
      - Required: ≥ 5:1 for personnel, ≥ 3:1 for equipment
      
      **5. Center of Gravity Check**
      - CG location: X = ${cg_x}", Y = ${cg_y}", Z = ${cg_z}"
      - Lift point locations: ${lift_points_data}
      - Verify CG is within lift point polygon
      - Check for tipping risk
      
      **6. Load Angle Effects**
      - Maximum sling angle: ${max_angle}°
      - Minimum sling angle: ${min_angle}° (typically ≥ 30°)
      - Angle factor: ${angle_factor} (from angle)
      - Adjusted load: ${adjusted_load} lbs
      
      **Output JSON:**
      {
        "calculation_status": "pass|fail|warning",
        "load_distribution": {
          "total_weight_lbs": number,
          "lift_points": number,
          "load_per_point_lbs": number
        },
        "sling_configuration": {
          "config": "string",
          "sling_count": number,
          "sling_angle_deg": number
        },
        "sling_loads": {
          "vertical_load_lbs": number,
          "basket_load_lbs": number,
          "choker_load_lbs": number,
          "bridle_load_lbs": number,
          "horizontal_force_lbs": number
        },
        "sling_selection": {
          "required_wll_tons": number,
          "sling_type": "string",
          "sling_diameter_in": number,
          "sling_wll_tons": number,
          "safety_factor": number,
          "adequate": true|false,
          "status": "pass|fail"
        },
        "center_of_gravity": {
          "cg_location": {"x": number, "y": number, "z": number},
          "within_lift_polygon": true|false,
          "tipping_risk": "low|moderate|high",
          "status": "pass|fail"
        },
        "load_angles": {
          "max_angle_deg": number,
          "min_angle_deg": number,
          "angle_factor": number,
          "adjusted_load_lbs": number,
          "status": "pass|fail"
        },
        "references": ["ASME B30.9", "OSHA 1926.251"],
        "recommendations": ["string"]
      }
    variables:
      - lift_data
      - total_weight
      - lift_points
      - load_per_point
      - sling_config
      - sling_count
      - sling_angle
      - basket_load
      - choker_load
      - bridle_load
      - horizontal_force
      - required_wll
      - wll_tons
      - sling_type
      - sling_dia
      - sling_wll
      - sling_sf
      - cg_x
      - cg_y
      - cg_z
      - lift_points_data
      - max_angle
      - min_angle
      - angle_factor
      - adjusted_load
    tags:
      - rigging
      - sling
      - lifting
      - calculation
    model_hint: "claude-sonnet-4"
    temperature: 0.2
    max_tokens: 3000

